[2023-06-22 23:02:14] live.ERROR: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'transactions.total_items' in 'where clause' (SQL: select count(*) as aggregate from (select `transactions`.`id`, `transactions`.`transaction_date`, `transactions`.`type`, `transactions`.`is_direct_sale`, `transactions`.`invoice_no`, `transactions`.`invoice_no` as `invoice_no_text`, `contacts`.`name`, `contacts`.`mobile`, `contacts`.`contact_id`, `contacts`.`supplier_business_name`, `transactions`.`status`, `transactions`.`payment_status`, `transactions`.`final_total`, `transactions`.`tax_amount`, `transactions`.`discount_amount`, `transactions`.`discount_type`, `transactions`.`total_before_tax`, `transactions`.`rp_redeemed`, `transactions`.`rp_redeemed_amount`, `transactions`.`rp_earned`, `transactions`.`types_of_service_id`, `transactions`.`shipping_status`, `transactions`.`pay_term_number`, `transactions`.`pay_term_type`, `transactions`.`additional_notes`, `transactions`.`staff_note`, `transactions`.`shipping_details`, `transactions`.`document`, `transactions`.`shipping_custom_field_1`, `transactions`.`shipping_custom_field_2`, `transactions`.`shipping_custom_field_3`, `transactions`.`shipping_custom_field_4`, `transactions`.`shipping_custom_field_5`, `transactions`.`custom_field_1`, `transactions`.`custom_field_2`, `transactions`.`custom_field_3`, `transactions`.`custom_field_4`, DATE_FORMAT(transactions.transaction_date, "%Y/%m/%d") as sale_date, CONCAT(COALESCE(u.surname, ''),' ',COALESCE(u.first_name, ''),' ',COALESCE(u.last_name,'')) as added_by, (SELECT SUM(IF(TP.is_return = 1,-1*TP.amount,TP.amount)) FROM transaction_payments AS TP WHERE
                        TP.transaction_id=transactions.id) as total_paid, `bl`.`name` as `business_location`, COUNT(SR.id) as return_exists, (SELECT SUM(TP2.amount) FROM transaction_payments AS TP2 WHERE
                        TP2.transaction_id=SR.id ) as return_paid, COALESCE(SR.final_total, 0) as amount_return, `SR`.`id` as `return_transaction_id`, `tos`.`name` as `types_of_service_name`, `transactions`.`service_custom_field_1`, GROUP_CONCAT(pp.name SEPARATOR ' ------ ') as total_items, CONCAT(COALESCE(ss.surname, ''),' ',COALESCE(ss.first_name, ''),' ',COALESCE(ss.last_name,'')) as waiter, `tables`.`name` as `table_name`, SUM(tsl.quantity - tsl.so_quantity_invoiced) as so_qty_remaining, `transactions`.`is_export` from `transactions` left join `contacts` on `transactions`.`contact_id` = `contacts`.`id` left join `transaction_sell_lines` as `tsl` on `transactions`.`id` = `tsl`.`transaction_id` and `tsl`.`parent_sell_line_id` is null left join `users` as `u` on `transactions`.`created_by` = `u`.`id` left join `products` as `pp` on `tsl`.`product_id` = `pp`.`id` left join `users` as `ss` on `transactions`.`res_waiter_id` = `ss`.`id` left join `res_tables` as `tables` on `transactions`.`res_table_id` = `tables`.`id` inner join `business_locations` as `bl` on `transactions`.`location_id` = `bl`.`id` left join `transactions` as `SR` on `transactions`.`id` = `SR`.`return_parent_id` left join `types_of_services` as `tos` on `transactions`.`types_of_service_id` = `tos`.`id` where `transactions`.`business_id` = 20 and `transactions`.`type` = sell and `transactions`.`status` = final and date(`transactions`.`transaction_date`) >= 2023-01-01 and date(`transactions`.`transaction_date`) <= 2023-12-31 and `transactions`.`is_direct_sale` = 0 and `transactions`.`sub_type` is null and (LOWER(`transactions`.`transaction_date`) LIKE %neopeptine% or LOWER(`transactions`.`invoice_no`) LIKE %neopeptine% or ((`contacts`.`name` like %NEOPEPTINE% or `contacts`.`supplier_business_name` like %NEOPEPTINE%)) or LOWER(`contacts`.`mobile`) LIKE %neopeptine% or LOWER(`transactions`.`total_items`) LIKE %neopeptine% or LOWER(`transactions`.`payment_status`) LIKE %neopeptine% or LOWER(`transactions`.`final_total`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_status`) LIKE %neopeptine% or LOWER(`bl`.`name`) LIKE %neopeptine% or LOWER(`tos`.`name`) LIKE %neopeptine% or LOWER(`transactions`.`service_custom_field_1`) LIKE %neopeptine% or LOWER(`u`.`first_name`) LIKE %neopeptine% or LOWER(`transactions`.`additional_notes`) LIKE %neopeptine% or LOWER(`transactions`.`staff_note`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_details`) LIKE %neopeptine% or LOWER(`tables`.`name`) LIKE %neopeptine% or LOWER(`ss`.`first_name`) LIKE %neopeptine%) and (LOWER(`transactions`.`transaction_date`) LIKE %caps% or LOWER(`transactions`.`invoice_no`) LIKE %caps% or ((`contacts`.`name` like %CAPS% or `contacts`.`supplier_business_name` like %CAPS%)) or LOWER(`contacts`.`mobile`) LIKE %caps% or LOWER(`transactions`.`total_items`) LIKE %caps% or LOWER(`transactions`.`payment_status`) LIKE %caps% or LOWER(`transactions`.`final_total`) LIKE %caps% or LOWER(`transactions`.`shipping_status`) LIKE %caps% or LOWER(`bl`.`name`) LIKE %caps% or LOWER(`tos`.`name`) LIKE %caps% or LOWER(`transactions`.`service_custom_field_1`) LIKE %caps% or LOWER(`u`.`first_name`) LIKE %caps% or LOWER(`transactions`.`additional_notes`) LIKE %caps% or LOWER(`transactions`.`staff_note`) LIKE %caps% or LOWER(`transactions`.`shipping_details`) LIKE %caps% or LOWER(`tables`.`name`) LIKE %caps% or LOWER(`ss`.`first_name`) LIKE %caps%) and (LOWER(`transactions`.`transaction_date`) LIKE %*% or LOWER(`transactions`.`invoice_no`) LIKE %*% or ((`contacts`.`name` like %*% or `contacts`.`supplier_business_name` like %*%)) or LOWER(`contacts`.`mobile`) LIKE %*% or LOWER(`transactions`.`total_items`) LIKE %*% or LOWER(`transactions`.`payment_status`) LIKE %*% or LOWER(`transactions`.`final_total`) LIKE %*% or LOWER(`transactions`.`shipping_status`) LIKE %*% or LOWER(`bl`.`name`) LIKE %*% or LOWER(`tos`.`name`) LIKE %*% or LOWER(`transactions`.`service_custom_field_1`) LIKE %*% or LOWER(`u`.`first_name`) LIKE %*% or LOWER(`transactions`.`additional_notes`) LIKE %*% or LOWER(`transactions`.`staff_note`) LIKE %*% or LOWER(`transactions`.`shipping_details`) LIKE %*% or LOWER(`tables`.`name`) LIKE %*% or LOWER(`ss`.`first_name`) LIKE %*%) and (LOWER(`transactions`.`transaction_date`) LIKE %10`s% or LOWER(`transactions`.`invoice_no`) LIKE %10`s% or ((`contacts`.`name` like %10`S% or `contacts`.`supplier_business_name` like %10`S%)) or LOWER(`contacts`.`mobile`) LIKE %10`s% or LOWER(`transactions`.`total_items`) LIKE %10`s% or LOWER(`transactions`.`payment_status`) LIKE %10`s% or LOWER(`transactions`.`final_total`) LIKE %10`s% or LOWER(`transactions`.`shipping_status`) LIKE %10`s% or LOWER(`bl`.`name`) LIKE %10`s% or LOWER(`tos`.`name`) LIKE %10`s% or LOWER(`transactions`.`service_custom_field_1`) LIKE %10`s% or LOWER(`u`.`first_name`) LIKE %10`s% or LOWER(`transactions`.`additional_notes`) LIKE %10`s% or LOWER(`transactions`.`staff_note`) LIKE %10`s% or LOWER(`transactions`.`shipping_details`) LIKE %10`s% or LOWER(`tables`.`name`) LIKE %10`s% or LOWER(`ss`.`first_name`) LIKE %10`s%) group by `transactions`.`id`) count_row_table) {"userId":30,"exception":"[object] (Yajra\\DataTables\\Exceptions\\Exception(code: 0): SQLSTATE[42S22]: Column not found: 1054 Unknown column 'transactions.total_items' in 'where clause' (SQL: select count(*) as aggregate from (select `transactions`.`id`, `transactions`.`transaction_date`, `transactions`.`type`, `transactions`.`is_direct_sale`, `transactions`.`invoice_no`, `transactions`.`invoice_no` as `invoice_no_text`, `contacts`.`name`, `contacts`.`mobile`, `contacts`.`contact_id`, `contacts`.`supplier_business_name`, `transactions`.`status`, `transactions`.`payment_status`, `transactions`.`final_total`, `transactions`.`tax_amount`, `transactions`.`discount_amount`, `transactions`.`discount_type`, `transactions`.`total_before_tax`, `transactions`.`rp_redeemed`, `transactions`.`rp_redeemed_amount`, `transactions`.`rp_earned`, `transactions`.`types_of_service_id`, `transactions`.`shipping_status`, `transactions`.`pay_term_number`, `transactions`.`pay_term_type`, `transactions`.`additional_notes`, `transactions`.`staff_note`, `transactions`.`shipping_details`, `transactions`.`document`, `transactions`.`shipping_custom_field_1`, `transactions`.`shipping_custom_field_2`, `t[2023-06-22 23:02:14] live.ERROR: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'transactions.total_items' in 'where clause' (SQL: select count(*) as aggregate from (select `transactions`.`id`, `transactions`.`transaction_date`, `transactions`.`type`, `transactions`.`is_direct_sale`, `transactions`.`invoice_no`, `transactions`.`invoice_no` as `invoice_no_text`, `contacts`.`name`, `contacts`.`mobile`, `contacts`.`contact_id`, `contacts`.`supplier_business_name`, `transactions`.`status`, `transactions`.`payment_status`, `transactions`.`final_total`, `transactions`.`tax_amount`, `transactions`.`discount_amount`, `transactions`.`discount_type`, `transactions`.`total_before_tax`, `transactions`.`rp_redeemed`, `transactions`.`rp_redeemed_amount`, `transactions`.`rp_earned`, `transactions`.`types_of_service_id`, `transactions`.`shipping_status`, `transactions`.`pay_term_number`, `transactions`.`pay_term_type`, `transactions`.`additional_notes`, `transactions`.`staff_note`, `transactions`.`shipping_details`, `transactions`.`document`, `transactions`.`shipping_custom_field_1`, `transactions`.`shipping_custom_field_2`, `transactions`.`shipping_custom_field_3`, `transactions`.`shipping_custom_field_4`, `transactions`.`shipping_custom_field_5`, `transactions`.`custom_field_1`, `transactions`.`custom_field_2`, `transactions`.`custom_field_3`, `transactions`.`custom_field_4`, DATE_FORMAT(transactions.transaction_date, "%Y/%m/%d") as sale_date, CONCAT(COALESCE(u.surname, ''),' ',COALESCE(u.first_name, ''),' ',COALESCE(u.last_name,'')) as added_by, (SELECT SUM(IF(TP.is_return = 1,-1*TP.amount,TP.amount)) FROM transaction_payments AS TP WHERE
                        TP.transaction_id=transactions.id) as total_paid, `bl`.`name` as `business_location`, COUNT(SR.id) as return_exists, (SELECT SUM(TP2.amount) FROM transaction_payments AS TP2 WHERE
                        TP2.transaction_id=SR.id ) as return_paid, COALESCE(SR.final_total, 0) as amount_return, `SR`.`id` as `return_transaction_id`, `tos`.`name` as `types_of_service_name`, `transactions`.`service_custom_field_1`, GROUP_CONCAT(pp.name SEPARATOR ' ------ ') as total_items, CONCAT(COALESCE(ss.surname, ''),' ',COALESCE(ss.first_name, ''),' ',COALESCE(ss.last_name,'')) as waiter, `tables`.`name` as `table_name`, SUM(tsl.quantity - tsl.so_quantity_invoiced) as so_qty_remaining, `transactions`.`is_export` from `transactions` left join `contacts` on `transactions`.`contact_id` = `contacts`.`id` left join `transaction_sell_lines` as `tsl` on `transactions`.`id` = `tsl`.`transaction_id` and `tsl`.`parent_sell_line_id` is null left join `users` as `u` on `transactions`.`created_by` = `u`.`id` left join `products` as `pp` on `tsl`.`product_id` = `pp`.`id` left join `users` as `ss` on `transactions`.`res_waiter_id` = `ss`.`id` left join `res_tables` as `tables` on `transactions`.`res_table_id` = `tables`.`id` inner join `business_locations` as `bl` on `transactions`.`location_id` = `bl`.`id` left join `transactions` as `SR` on `transactions`.`id` = `SR`.`return_parent_id` left join `types_of_services` as `tos` on `transactions`.`types_of_service_id` = `tos`.`id` where `transactions`.`business_id` = 20 and `transactions`.`type` = sell and `transactions`.`status` = final and date(`transactions`.`transaction_date`) >= 2023-01-01 and date(`transactions`.`transaction_date`) <= 2023-12-31 and `transactions`.`is_direct_sale` = 0 and `transactions`.`sub_type` is null and (LOWER(`transactions`.`transaction_date`) LIKE %neopeptine% or LOWER(`transactions`.`invoice_no`) LIKE %neopeptine% or ((`contacts`.`name` like %NEOPEPTINE% or `contacts`.`supplier_business_name` like %NEOPEPTINE%)) or LOWER(`contacts`.`mobile`) LIKE %neopeptine% or LOWER(`transactions`.`total_items`) LIKE %neopeptine% or LOWER(`transactions`.`payment_status`) LIKE %neopeptine% or LOWER(`transactions`.`final_total`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_status`) LIKE %neopeptine% or LOWER(`bl`.`name`) LIKE %neopeptine% or LOWER(`tos`.`name`) LIKE %neopeptine% or LOWER(`transactions`.`service_custom_field_1`) LIKE %neopeptine% or LOWER(`u`.`first_name`) LIKE %neopeptine% or LOWER(`transactions`.`additional_notes`) LIKE %neopeptine% or LOWER(`transactions`.`staff_note`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_details`) LIKE %neopeptine% or LOWER(`tables`.`name`) LIKE %neopeptine% or LOWER(`ss`.`first_name`) LIKE %neopeptine%) and (LOWER(`transactions`.`transaction_date`) LIKE %caps% or LOWER(`transactions`.`invoice_no`) LIKE %caps% or ((`contacts`.`name` like %CAPS% or `contacts`.`supplier_business_name` like %CAPS%)) or LOWER(`contacts`.`mobile`) LIKE %caps% or LOWER(`transactions`.`total_items`) LIKE %caps% or LOWER(`transactions`.`payment_status`) LIKE %caps% or LOWER(`transactions`.`final_total`) LIKE %caps% or LOWER(`transactions`.`shipping_status`) LIKE %caps% or LOWER(`bl`.`name`) LIKE %caps% or LOWER(`tos`.`name`) LIKE %caps% or LOWER(`transactions`.`service_custom_field_1`) LIKE %caps% or LOWER(`u`.`first_name`) LIKE %caps% or LOWER(`transactions`.`additional_notes`) LIKE %caps% or LOWER(`transactions`.`staff_note`) LIKE %caps% or LOWER(`transactions`.`shipping_details`) LIKE %caps% or LOWER(`tables`.`name`) LIKE %caps% or LOWER(`ss`.`first_name`) LIKE %caps%) and (LOWER(`transactions`.`transaction_date`) LIKE %*% or LOWER(`transactions`.`invoice_no`) LIKE %*% or ((`contacts`.`name` like %*% or `contacts`.`supplier_business_name` like %*%)) or LOWER(`contacts`.`mobile`) LIKE %*% or LOWER(`transactions`.`total_items`) LIKE %*% or LOWER(`transactions`.`payment_status`) LIKE %*% or LOWER(`transactions`.`final_total`) LIKE %*% or LOWER(`transactions`.`shipping_status`) LIKE %*% or LOWER(`bl`.`name`) LIKE %*% or LOWER(`tos`.`name`) LIKE %*% or LOWER(`transactions`.`service_custom_field_1`) LIKE %*% or LOWER(`u`.`first_name`) LIKE %*% or LOWER(`transactions`.`additional_notes`) LIKE %*% or LOWER(`transactions`.`staff_note`) LIKE %*% or LOWER(`transactions`.`shipping_details`) LIKE %*% or LOWER(`tables`.`name`) LIKE %*% or LOWER(`ss`.`first_name`) LIKE %*%) and (LOWER(`transactions`.`transaction_date`) LIKE %10`% or LOWER(`transactions`.`invoice_no`) LIKE %10`% or ((`contacts`.`name` like %10`% or `contacts`.`supplier_business_name` like %10`%)) or LOWER(`contacts`.`mobile`) LIKE %10`% or LOWER(`transactions`.`total_items`) LIKE %10`% or LOWER(`transactions`.`payment_status`) LIKE %10`% or LOWER(`transactions`.`final_total`) LIKE %10`% or LOWER(`transactions`.`shipping_status`) LIKE %10`% or LOWER(`bl`.`name`) LIKE %10`% or LOWER(`tos`.`name`) LIKE %10`% or LOWER(`transactions`.`service_custom_field_1`) LIKE %10`% or LOWER(`u`.`first_name`) LIKE %10`% or LOWER(`transactions`.`additional_notes`) LIKE %10`% or LOWER(`transactions`.`staff_note`) LIKE %10`% or LOWER(`transactions`.`shipping_details`) LIKE %10`% or LOWER(`tables`.`name`) LIKE %10`% or LOWER(`ss`.`first_name`) LIKE %10`%) group by `transactions`.`id`) count_row_table) {"userId":30,"exception":"[object] (Yajra\\DataTables\\Exceptions\\Exception(code: 0): SQLSTATE[42S22]: Column not found: 1054 Unknown column 'transactions.total_items' in 'where clause' (SQL: select count(*) as aggregate from (select `transactions`.`id`, `transactions`.`transaction_date`, `transactions`.`type`, `transactions`.`is_direct_sale`, `transactions`.`invoice_no`, `transactions`.`invoice_no` as `invoice_no_text`, `contacts`.`name`, `contacts`.`mobile`, `contacts`.`contact_id`, `contacts`.`supplier_business_name`, `transactions`.`status`, `transactions`.`payment_status`, `transactions`.`final_total`, `transactions`.`tax_amount`, `transactions`.`discount_amount`, `transactions`.`discount_type`, `transactions`.`total_before_tax`, `transactions`.`rp_redeemed`, `transactions`.`rp_redeemed_amount`, `transactions`.`rp_earned`, `transactions`.`types_of_service_id`, `transactions`.`shipping_status`, `transactions`.`pay_term_number`, `transactions`.`pay_term_type`, `transactions`.`additional_notes`, `transactions`.`staff_note`, `transactions`.`shipping_details`, `transactions`.`document`, `transactions`.`shipping_custom_field_1`, `transactions`.`shipping_custom_field_2`, `transactions`.`shipransactions`.`shipping_custom_field_3`, `transactions`.`shipping_custom_field_4`, `transactions`.`shipping_custom_field_5`, `transactions`.`custom_field_1`, `transactions`.`custom_field_2`, `transactions`.`custom_field_3`, `transactions`.`custom_field_4`, DATE_FORMAT(transactions.transaction_date, \"%Y/%m/%d\") as sale_date, CONCAT(COALESCE(u.surname, ''),' ',COALESCE(u.first_name, ''),' ',COALESCE(u.last_name,'')) as added_by, (SELECT SUM(IF(TP.is_return = 1,-1*TP.amount,TP.amount)) FROM transaction_payments AS TP WHERE
                        TP.transaction_id=transactions.id) as total_paid, `bl`.`name` as `business_location`, COUNT(SR.id) as return_exists, (SELECT SUM(TP2.amount) FROM transaction_payments AS TP2 WHERE
                        TP2.transaction_id=SR.id ) as return_paid, COALESCE(SR.final_total, 0) as amount_return, `SR`.`id` as `return_transaction_id`, `tos`.`name` as `types_of_service_name`, `transactions`.`service_custom_field_1`, GROUP_CONCAT(pp.name SEPARATOR ' ------ ') as total_items, CONCAT(COALESCE(ss.surname, ''),' ',COALESCE(ss.first_name, ''),' ',COALESCE(ss.last_name,'')) as waiter, `tables`.`name` as `table_name`, SUM(tsl.quantity - tsl.so_quantity_invoiced) as so_qty_remaining, `transactions`.`is_export` from `transactions` left join `contacts` on `transactions`.`contact_id` = `contacts`.`id` left join `transaction_sell_lines` as `tsl` on `transactions`.`id` = `tsl`.`transaction_id` and `tsl`.`parent_sell_line_id` is null left join `users` as `u` on `transactions`.`created_by` = `u`.`id` left join `products` as `pp` on `tsl`.`product_id` = `pp`.`id` left join `users` as `ss` on `transactions`.`res_waiter_id` = `ss`.`id` left join `res_tables` as `tables` on `transactions`.`res_table_id` = `tables`.`id` inner join `business_locations` as `bl` on `transactions`.`location_id` = `bl`.`id` left join `transactions` as `SR` on `transactions`.`id` = `SR`.`return_parent_id` left join `types_of_services` as `tos` on `transactions`.`types_of_service_id` = `tos`.`id` where `transactions`.`business_id` = 20 and `transactions`.`type` = sell and `transactions`.`status` = final and date(`transactions`.`transaction_date`) >= 2023-01-01 and date(`transactions`.`transaction_date`) <= 2023-12-31 and `transactions`.`is_direct_sale` = 0 and `transactions`.`sub_type` is null and (LOWER(`transactions`.`transaction_date`) LIKE %neopeptine% or LOWER(`transactions`.`invoice_no`) LIKE %neopeptine% or ((`contacts`.`name` like %NEOPEPTINE% or `contacts`.`supplier_business_name` like %NEOPEPTINE%)) or LOWER(`contacts`.`mobile`) LIKE %neopeptine% or LOWER(`transactions`.`total_items`) LIKE %neopeptine% or LOWER(`transactions`.`payment_status`) LIKE %neopeptine% or LOWER(`transactions`.`final_total`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_status`) LIKE %neopeptine% or LOWER(`bl`.`name`) LIKE %neopeptine% or LOWER(`tos`.`name`) LIKE %neopeptine% or LOWER(`transactions`.`service_custom_field_1`) LIKE %neopeptine% or LOWER(`u`.`first_name`) LIKE %neopeptine% or LOWER(`transactions`.`additional_notes`) LIKE %neopeptine% or LOWER(`transactions`.`staff_note`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_details`) LIKE %neopeptine% or LOWER(`tables`.`name`) LIKE %neopeptine% or LOWER(`ss`.`first_name`) LIKE %neopeptine%) and (LOWER(`transactions`.`transaction_date`) LIKE %caps% or LOWER(`transactions`.`invoice_no`) LIKE %caps% or ((`contacts`.`name` like %CAPS% or `contacts`.`supplier_business_name` like %CAPS%)) or LOWER(`contacts`.`mobile`) LIKE %caps% or LOWER(`transactions`.`total_items`) LIKE %caps% or LOWER(`transactions`.`payment_status`) LIKE %caps% or LOWER(`transactions`.`final_total`) LIKE %caps% or LOWER(`transactions`.`shipping_status`) LIKE %caps% or LOWER(`bl`.`name`) LIKE %caps% or LOWER(`tos`.`name`) LIKE %caps% or LOWER(`transactions`.`service_custom_field_1`) LIKE %caps% or LOWER(`u`.`first_name`) LIKE %caps% or LOWER(`transactions`.`additional_notes`) LIKE %caps% or LOWER(`transactions`.`staff_note`) LIKE %caps% or LOWER(`transactions`.`shipping_details`) LIKE %caps% or LOWER(`tables`.`name`) LIKE %caps% or LOWER(`ss`.`first_name`) LIKE %caps%) and (LOWER(`transactions`.`transaction_date`) LIKE %*% or LOWER(`transactions`.`invoice_no`) LIKE %*% or ((`contacts`.`name` like %*% or `contacts`.`supplier_business_name` like %*%)) or LOWER(`contacts`.`mobile`) LIKE %*% or LOWER(`transactions`.`total_items`) LIKE %*% or LOWER(`transactions`.`payment_status`) LIKE %*% or LOWER(`transactions`.`final_total`) LIKE %*% or LOWER(`transactions`.`shipping_status`) LIKE %*% or LOWER(`bl`.`name`) LIKE %*% or LOWER(`tos`.`name`) LIKE %*% or LOWER(`transactions`.`service_custom_field_1`) LIKE %*% or LOWER(`u`.`first_name`) LIKE %*% or LOWER(`transactions`.`additional_notes`) LIKE %*% or LOWER(`transactions`.`staff_note`) LIKE %*% or LOWER(`transactions`.`shipping_details`) LIKE %*% or LOWER(`tables`.`name`) LIKE %*% or LOWER(`ss`.`first_name`) LIKE %*%) and (LOWER(`transactions`.`transaction_date`) LIKE %10`s% or LOWER(`transactions`.`invoice_no`) LIKE %10`s% or ((`contacts`.`name` like %10`S% or `contacts`.`supplier_business_name` like %10`S%)) or LOWER(`contacts`.`mobile`) LIKE %10`s% or LOWER(`transactions`.`total_items`) LIKE %10`s% or LOWER(`transactions`.`payment_status`) LIKE %10`s% or LOWER(`transactions`.`final_total`) LIKE %10`s% or LOWER(`transactions`.`shipping_status`) LIKE %10`s% or LOWER(`bl`.`name`) LIKE %10`s% or LOWER(`tos`.`name`) LIKE %10`s% or LOWER(`transactions`.`service_custom_field_1`) LIKE %10`s% or LOWER(`u`.`first_name`) LIKE %10`s% or LOWER(`transactions`.`additional_notes`) LIKE %10`s% or LOWER(`transactions`.`staff_note`) LIKE %10`s% or LOWER(`transactions`.`shipping_details`) LIKE %10`s% or LOWER(`tables`.`name`) LIKE %10`s% or LOWER(`ss`.`first_name`) LIKE %10`s%) group by `transactions`.`id`) count_row_table) at /home/wdatzrkn/public_html/tiba/vendor/yajra/laravel-datatables-oracle/src/DataTableAbstract.php:875, Illuminate\\Database\\QueryException(code: 42S22): SQLSTATE[42S22]: Column not found: 1054 Unknown column 'transactions.total_items' in 'where clause' (SQL: select count(*) as aggregate from (select `transactions`.`id`, `transactions`.`transaction_date`, `transactions`.`type`, `transactions`.`is_direct_sale`, `transactions`.`invoice_no`, `transactions`.`invoice_no` as `invoice_no_text`, `contacts`.`name`, `contacts`.`mobile`, `contacts`.`contact_id`, `contacts`.`supplier_business_name`, `transactions`.`status`, `transactions`.`payment_status`, `transactions`.`final_total`, `transactions`.`tax_amount`, `transactions`.`discount_amount`, `transactions`.`discount_type`, `transactions`.`total_before_tax`, `transactions`.`rp_redeemed`, `transactions`.`rp_redeemed_amount`, `transactions`.`rp_earned`, `transactions`.`types_of_service_id`, `transactions`.`shipping_status`, `transactions`.`pay_term_number`, `transactions`.`pay_term_type`, `transactions`.`additional_notes`, `transactions`.`staff_note`, `transactions`.`shipping_details`, `transactions`.`document`, `transactions`.`shipping_custom_field_1`, `transactions`.`shipping_custom_field_2`, `transactions`.`shipping_custom_field_3`, `transactions`.`shipping_custom_field_4`, `transactions`.`shipping_custom_field_5`, `transactions`.`custom_field_1`, `transactions`.`custom_field_2`, `transactions`.`custom_field_3`, `transactions`.`custom_field_4`, DATE_FORMAT(transactions.transaction_date, \"%Y/%m/%d\") as sale_date, CONCAT(COALESCE(u.surname, ''),' ',COALESCE(u.first_name, ''),' ',COALESCE(u.last_name,'')) as added_by, (SELECT SUM(IF(TP.is_return = 1,-1*TP.amount,TP.amount)) FROM transaction_payments AS TP WHERE
                        TP.transaction_id=transactions.id) as total_paid, `bl`.`name` as `business_location`, COUNT(SR.id) as return_exists, (SELECT SUM(TP2.amount) FROM transaction_payments AS TP2 WHERE
                        TP2.transaction_id=SR.id ) as return_paid, COALESCE(SR.final_total, 0) as amount_return, `SR`.`id` as `return_transaction_id`, `tos`.`name` as `types_of_service_name`, `transactions`.`service_custom_field_1`, GROUP_CONCAT(pp.name SEPARATOR ' ------ ') as total_items, CONCAT(COALESCE(ss.surname, ''),' ',COALESCEping_custom_field_3`, `transactions`.`shipping_custom_field_4`, `transactions`.`shipping_custom_field_5`, `transactions`.`custom_field_1`, `transactions`.`custom_field_2`, `transactions`.`custom_field_3`, `transactions`.`custom_field_4`, DATE_FORMAT(transactions.transaction_date, \"%Y/%m/%d\") as sale_date, CONCAT(COALESCE(u.surname, ''),' ',COALESCE(u.first_name, ''),' ',COALESCE(u.last_name,'')) as added_by, (SELECT SUM(IF(TP.is_return = 1,-1*TP.amount,TP.amount)) FROM transaction_payments AS TP WHERE
                        TP.transaction_id=transactions.id) as total_paid, `bl`.`name` as `business_location`, COUNT(SR.id) as return_exists, (SELECT SUM(TP2.amount) FROM transaction_payments AS TP2 WHERE
                        TP2.transaction_id=SR.id ) as return_paid, COALESCE(SR.final_total, 0) as amount_return, `SR`.`id` as `return_transaction_id`, `tos`.`name` as `types_of_service_name`, `transactions`.`service_custom_field_1`, GROUP_CONCAT(pp.name SEPARATOR ' ------ ') as total_items, CONCAT(COALESCE(ss.surname, ''),' ',COALESCE(ss.first_name, ''),' ',COALESCE(ss.last_name,'')) as waiter, `tables`.`name` as `table_name`, SUM(tsl.quantity - tsl.so_quantity_invoiced) as so_qty_remaining, `transactions`.`is_export` from `transactions` left join `contacts` on `transactions`.`contact_id` = `contacts`.`id` left join `transaction_sell_lines` as `tsl` on `transactions`.`id` = `tsl`.`transaction_id` and `tsl`.`parent_sell_line_id` is null left join `users` as `u` on `transactions`.`created_by` = `u`.`id` left join `products` as `pp` on `tsl`.`product_id` = `pp`.`id` left join `users` as `ss` on `transactions`.`res_waiter_id` = `ss`.`id` left join `res_tables` as `tables` on `transactions`.`res_table_id` = `tables`.`id` inner join `business_locations` as `bl` on `transactions`.`location_id` = `bl`.`id` left join `transactions` as `SR` on `transactions`.`id` = `SR`.`return_parent_id` left join `types_of_services` as `tos` on `transactions`.`types_of_service_id` = `tos`.`id` where `transactions`.`business_id` = 20 and `transactions`.`type` = sell and `transactions`.`status` = final and date(`transactions`.`transaction_date`) >= 2023-01-01 and date(`transactions`.`transaction_date`) <= 2023-12-31 and `transactions`.`is_direct_sale` = 0 and `transactions`.`sub_type` is null and (LOWER(`transactions`.`transaction_date`) LIKE %neopeptine% or LOWER(`transactions`.`invoice_no`) LIKE %neopeptine% or ((`contacts`.`name` like %NEOPEPTINE% or `contacts`.`supplier_business_name` like %NEOPEPTINE%)) or LOWER(`contacts`.`mobile`) LIKE %neopeptine% or LOWER(`transactions`.`total_items`) LIKE %neopeptine% or LOWER(`transactions`.`payment_status`) LIKE %neopeptine% or LOWER(`transactions`.`final_total`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_status`) LIKE %neopeptine% or LOWER(`bl`.`name`) LIKE %neopeptine% or LOWER(`tos`.`name`) LIKE %neopeptine% or LOWER(`transactions`.`service_custom_field_1`) LIKE %neopeptine% or LOWER(`u`.`first_name`) LIKE %neopeptine% or LOWER(`transactions`.`additional_notes`) LIKE %neopeptine% or LOWER(`transactions`.`staff_note`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_details`) LIKE %neopeptine% or LOWER(`tables`.`name`) LIKE %neopeptine% or LOWER(`ss`.`first_name`) LIKE %neopeptine%) and (LOWER(`transactions`.`transaction_date`) LIKE %caps% or LOWER(`transactions`.`invoice_no`) LIKE %caps% or ((`contacts`.`name` like %CAPS% or `contacts`.`supplier_business_name` like %CAPS%)) or LOWER(`contacts`.`mobile`) LIKE %caps% or LOWER(`transactions`.`total_items`) LIKE %caps% or LOWER(`transactions`.`payment_status`) LIKE %caps% or LOWER(`transactions`.`final_total`) LIKE %caps% or LOWER(`transactions`.`shipping_status`) LIKE %caps% or LOWER(`bl`.`name`) LIKE %caps% or LOWER(`tos`.`name`) LIKE %caps% or LOWER(`transactions`.`service_custom_field_1`) LIKE %caps% or LOWER(`u`.`first_name`) LIKE %caps% or LOWER(`transactions`.`additional_notes`) LIKE %caps% or LOWER(`transactions`.`staff_note`) LIKE %caps% or LOWER(`transactions`.`shipping_details`) LIKE %caps% or LOWER(`tables`.`name`) LIKE %caps% or LOWER(`ss`.`first_name`) LIKE %caps%) and (LOWER(`transactions`.`transaction_date`) LIKE %*% or LOWER(`transactions`.`invoice_no`) LIKE %*% or ((`contacts`.`name` like %*% or `contacts`.`supplier_business_name` like %*%)) or LOWER(`contacts`.`mobile`) LIKE %*% or LOWER(`transactions`.`total_items`) LIKE %*% or LOWER(`transactions`.`payment_status`) LIKE %*% or LOWER(`transactions`.`final_total`) LIKE %*% or LOWER(`transactions`.`shipping_status`) LIKE %*% or LOWER(`bl`.`name`) LIKE %*% or LOWER(`tos`.`name`) LIKE %*% or LOWER(`transactions`.`service_custom_field_1`) LIKE %*% or LOWER(`u`.`first_name`) LIKE %*% or LOWER(`transactions`.`additional_notes`) LIKE %*% or LOWER(`transactions`.`staff_note`) LIKE %*% or LOWER(`transactions`.`shipping_details`) LIKE %*% or LOWER(`tables`.`name`) LIKE %*% or LOWER(`ss`.`first_name`) LIKE %*%) and (LOWER(`transactions`.`transaction_date`) LIKE %10`% or LOWER(`transactions`.`invoice_no`) LIKE %10`% or ((`contacts`.`name` like %10`% or `contacts`.`supplier_business_name` like %10`%)) or LOWER(`contacts`.`mobile`) LIKE %10`% or LOWER(`transactions`.`total_items`) LIKE %10`% or LOWER(`transactions`.`payment_status`) LIKE %10`% or LOWER(`transactions`.`final_total`) LIKE %10`% or LOWER(`transactions`.`shipping_status`) LIKE %10`% or LOWER(`bl`.`name`) LIKE %10`% or LOWER(`tos`.`name`) LIKE %10`% or LOWER(`transactions`.`service_custom_field_1`) LIKE %10`% or LOWER(`u`.`first_name`) LIKE %10`% or LOWER(`transactions`.`additional_notes`) LIKE %10`% or LOWER(`transactions`.`staff_note`) LIKE %10`% or LOWER(`transactions`.`shipping_details`) LIKE %10`% or LOWER(`tables`.`name`) LIKE %10`% or LOWER(`ss`.`first_name`) LIKE %10`%) group by `transactions`.`id`) count_row_table) at /home/wdatzrkn/public_html/tiba/vendor/yajra/laravel-datatables-oracle/src/DataTableAbstract.php:875, Illuminate\\Database\\QueryException(code: 42S22): SQLSTATE[42S22]: Column not found: 1054 Unknown column 'transactions.total_items' in 'where clause' (SQL: select count(*) as aggregate from (select `transactions`.`id`, `transactions`.`transaction_date`, `transactions`.`type`, `transactions`.`is_direct_sale`, `transactions`.`invoice_no`, `transactions`.`invoice_no` as `invoice_no_text`, `contacts`.`name`, `contacts`.`mobile`, `contacts`.`contact_id`, `contacts`.`supplier_business_name`, `transactions`.`status`, `transactions`.`payment_status`, `transactions`.`final_total`, `transactions`.`tax_amount`, `transactions`.`discount_amount`, `transactions`.`discount_type`, `transactions`.`total_before_tax`, `transactions`.`rp_redeemed`, `transactions`.`rp_redeemed_amount`, `transactions`.`rp_earned`, `transactions`.`types_of_service_id`, `transactions`.`shipping_status`, `transactions`.`pay_term_number`, `transactions`.`pay_term_type`, `transactions`.`additional_notes`, `transactions`.`staff_note`, `transactions`.`shipping_details`, `transactions`.`document`, `transactions`.`shipping_custom_field_1`, `transactions`.`shipping_custom_field_2`, `transactions`.`shipping_custom_field_3`, `transactions`.`shipping_custom_field_4`, `transactions`.`shipping_custom_field_5`, `transactions`.`custom_field_1`, `transactions`.`custom_field_2`, `transactions`.`custom_field_3`, `transactions`.`custom_field_4`, DATE_FORMAT(transactions.transaction_date, \"%Y/%m/%d\") as sale_date, CONCAT(COALESCE(u.surname, ''),' ',COALESCE(u.first_name, ''),' ',COALESCE(u.last_name,'')) as added_by, (SELECT SUM(IF(TP.is_return = 1,-1*TP.amount,TP.amount)) FROM transaction_payments AS TP WHERE
                        TP.transaction_id=transactions.id) as total_paid, `bl`.`name` as `business_location`, COUNT(SR.id) as return_exists, (SELECT SUM(TP2.amount) FROM transaction_payments AS TP2 WHERE
                        TP2.transaction_id=SR.id ) as return_paid, COALESCE(SR.final_total, 0) as amount_return, `SR`.`id` as `return_transaction_id`, `tos`.`name` as `types_of_service_name`, `transactions`.`service_custom_field_1`, GROUP_CONCAT(pp.name SEPARATOR ' ------ ') as total_items, CONCAT(COALESCE(ss.surname, ''),' ',COALESCE(ss.first_name, ''),' ',COALESCE(ss.(ss.first_name, ''),' ',COALESCE(ss.last_name,'')) as waiter, `tables`.`name` as `table_name`, SUM(tsl.quantity - tsl.so_quantity_invoiced) as so_qty_remaining, `transactions`.`is_export` from `transactions` left join `contacts` on `transactions`.`contact_id` = `contacts`.`id` left join `transaction_sell_lines` as `tsl` on `transactions`.`id` = `tsl`.`transaction_id` and `tsl`.`parent_sell_line_id` is null left join `users` as `u` on `transactions`.`created_by` = `u`.`id` left join `products` as `pp` on `tsl`.`product_id` = `pp`.`id` left join `users` as `ss` on `transactions`.`res_waiter_id` = `ss`.`id` left join `res_tables` as `tables` on `transactions`.`res_table_id` = `tables`.`id` inner join `business_locations` as `bl` on `transactions`.`location_id` = `bl`.`id` left join `transactions` as `SR` on `transactions`.`id` = `SR`.`return_parent_id` left join `types_of_services` as `tos` on `transactions`.`types_of_service_id` = `tos`.`id` where `transactions`.`business_id` = 20 and `transactions`.`type` = sell and `transactions`.`status` = final and date(`transactions`.`transaction_date`) >= 2023-01-01 and date(`transactions`.`transaction_date`) <= 2023-12-31 and `transactions`.`is_direct_sale` = 0 and `transactions`.`sub_type` is null and (LOWER(`transactions`.`transaction_date`) LIKE %neopeptine% or LOWER(`transactions`.`invoice_no`) LIKE %neopeptine% or ((`contacts`.`name` like %NEOPEPTINE% or `contacts`.`supplier_business_name` like %NEOPEPTINE%)) or LOWER(`contacts`.`mobile`) LIKE %neopeptine% or LOWER(`transactions`.`total_items`) LIKE %neopeptine% or LOWER(`transactions`.`payment_status`) LIKE %neopeptine% or LOWER(`transactions`.`final_total`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_status`) LIKE %neopeptine% or LOWER(`bl`.`name`) LIKE %neopeptine% or LOWER(`tos`.`name`) LIKE %neopeptine% or LOWER(`transactions`.`service_custom_field_1`) LIKE %neopeptine% or LOWER(`u`.`first_name`) LIKE %neopeptine% or LOWER(`transactions`.`additional_notes`) LIKE %neopeptine% or LOWER(`transactions`.`staff_note`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_details`) LIKE %neopeptine% or LOWER(`tables`.`name`) LIKE %neopeptine% or LOWER(`ss`.`first_name`) LIKE %neopeptine%) and (LOWER(`transactions`.`transaction_date`) LIKE %caps% or LOWER(`transactions`.`invoice_no`) LIKE %caps% or ((`contacts`.`name` like %CAPS% or `contacts`.`supplier_business_name` like %CAPS%)) or LOWER(`contacts`.`mobile`) LIKE %caps% or LOWER(`transactions`.`total_items`) LIKE %caps% or LOWER(`transactions`.`payment_status`) LIKE %caps% or LOWER(`transactions`.`final_total`) LIKE %caps% or LOWER(`transactions`.`shipping_status`) LIKE %caps% or LOWER(`bl`.`name`) LIKE %caps% or LOWER(`tos`.`name`) LIKE %caps% or LOWER(`transactions`.`service_custom_field_1`) LIKE %caps% or LOWER(`u`.`first_name`) LIKE %caps% or LOWER(`transactions`.`additional_notes`) LIKE %caps% or LOWER(`transactions`.`staff_note`) LIKE %caps% or LOWER(`transactions`.`shipping_details`) LIKE %caps% or LOWER(`tables`.`name`) LIKE %caps% or LOWER(`ss`.`first_name`) LIKE %caps%) and (LOWER(`transactions`.`transaction_date`) LIKE %*% or LOWER(`transactions`.`invoice_no`) LIKE %*% or ((`contacts`.`name` like %*% or `contacts`.`supplier_business_name` like %*%)) or LOWER(`contacts`.`mobile`) LIKE %*% or LOWER(`transactions`.`total_items`) LIKE %*% or LOWER(`transactions`.`payment_status`) LIKE %*% or LOWER(`transactions`.`final_total`) LIKE %*% or LOWER(`transactions`.`shipping_status`) LIKE %*% or LOWER(`bl`.`name`) LIKE %*% or LOWER(`tos`.`name`) LIKE %*% or LOWER(`transactions`.`service_custom_field_1`) LIKE %*% or LOWER(`u`.`first_name`) LIKE %*% or LOWER(`transactions`.`additional_notes`) LIKE %*% or LOWER(`transactions`.`staff_note`) LIKE %*% or LOWER(`transactions`.`shipping_details`) LIKE %*% or LOWER(`tables`.`name`) LIKE %*% or LOWER(`ss`.`first_name`) LIKE %*%) and (LOWER(`transactions`.`transaction_date`) LIKE %10`s% or LOWER(`transactions`.`invoice_no`) LIKE %10`s% or ((`contacts`.`name` like %10`S% or `contacts`.`supplier_business_name` like %10`S%)) or LOWER(`contacts`.`mobile`) LIKE %10`s% or LOWER(`transactions`.`total_items`) LIKE %10`s% or LOWER(`transactions`.`payment_status`) LIKE %10`s% or LOWER(`transactions`.`final_total`) LIKE %10`s% or LOWER(`transactions`.`shipping_status`) LIKE %10`s% or LOWER(`bl`.`name`) LIKE %10`s% or LOWER(`tos`.`name`) LIKE %10`s% or LOWER(`transactions`.`service_custom_field_1`) LIKE %10`s% or LOWER(`u`.`first_name`) LIKE %10`s% or LOWER(`transactions`.`additional_notes`) LIKE %10`s% or LOWER(`transactions`.`staff_note`) LIKE %10`s% or LOWER(`transactions`.`shipping_details`) LIKE %10`s% or LOWER(`tables`.`name`) LIKE %10`s% or LOWER(`ss`.`first_name`) LIKE %10`s%) group by `transactions`.`id`) count_row_table) at /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Database/Connection.php:664, PDOException(code: 42S22): SQLSTATE[42S22]: Column not found: 1054 Unknown column 'transactions.total_items' in 'where clause' at /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Database/Connection.php:326)
[stacktrace]
#0 /home/wdatzrkn/public_html/tiba/vendor/yajra/laravel-datatables-oracle/src/QueryDataTable.php(106): Yajra\\DataTables\\DataTableAbstract->errorResponse(Object(Illuminate\\Database\\QueryException))
#1 /home/wdatzrkn/public_html/tiba/app/Http/Controllers/SellController.php(578): Yajra\\DataTables\\QueryDataTable->make(true)
#2 [internal function]: App\\Http\\Controllers\\SellController->index()
#3 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Controller.php(54): call_user_func_array(Array, Array)
#4 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(45): Illuminate\\Routing\\Controller->callAction('index', Array)
#5 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Route.php(219): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\SellController), 'index')
#6 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Route.php(176): Illuminate\\Routing\\Route->runController()
#7 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(680): Illuminate\\Routing\\Route->run()
#8 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(30): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#9 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/CheckUserLogin.php(22): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#10 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\CheckUserLogin->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#11 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#12 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/AdminSidebarMenu.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#13 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\AdminSidebarMenu->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#14 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#15 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/Timezone.php(30): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#16 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\Timezone->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#17 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipelast_name,'')) as waiter, `tables`.`name` as `table_name`, SUM(tsl.quantity - tsl.so_quantity_invoiced) as so_qty_remaining, `transactions`.`is_export` from `transactions` left join `contacts` on `transactions`.`contact_id` = `contacts`.`id` left join `transaction_sell_lines` as `tsl` on `transactions`.`id` = `tsl`.`transaction_id` and `tsl`.`parent_sell_line_id` is null left join `users` as `u` on `transactions`.`created_by` = `u`.`id` left join `products` as `pp` on `tsl`.`product_id` = `pp`.`id` left join `users` as `ss` on `transactions`.`res_waiter_id` = `ss`.`id` left join `res_tables` as `tables` on `transactions`.`res_table_id` = `tables`.`id` inner join `business_locations` as `bl` on `transactions`.`location_id` = `bl`.`id` left join `transactions` as `SR` on `transactions`.`id` = `SR`.`return_parent_id` left join `types_of_services` as `tos` on `transactions`.`types_of_service_id` = `tos`.`id` where `transactions`.`business_id` = 20 and `transactions`.`type` = sell and `transactions`.`status` = final and date(`transactions`.`transaction_date`) >= 2023-01-01 and date(`transactions`.`transaction_date`) <= 2023-12-31 and `transactions`.`is_direct_sale` = 0 and `transactions`.`sub_type` is null and (LOWER(`transactions`.`transaction_date`) LIKE %neopeptine% or LOWER(`transactions`.`invoice_no`) LIKE %neopeptine% or ((`contacts`.`name` like %NEOPEPTINE% or `contacts`.`supplier_business_name` like %NEOPEPTINE%)) or LOWER(`contacts`.`mobile`) LIKE %neopeptine% or LOWER(`transactions`.`total_items`) LIKE %neopeptine% or LOWER(`transactions`.`payment_status`) LIKE %neopeptine% or LOWER(`transactions`.`final_total`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_status`) LIKE %neopeptine% or LOWER(`bl`.`name`) LIKE %neopeptine% or LOWER(`tos`.`name`) LIKE %neopeptine% or LOWER(`transactions`.`service_custom_field_1`) LIKE %neopeptine% or LOWER(`u`.`first_name`) LIKE %neopeptine% or LOWER(`transactions`.`additional_notes`) LIKE %neopeptine% or LOWER(`transactions`.`staff_note`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_details`) LIKE %neopeptine% or LOWER(`tables`.`name`) LIKE %neopeptine% or LOWER(`ss`.`first_name`) LIKE %neopeptine%) and (LOWER(`transactions`.`transaction_date`) LIKE %caps% or LOWER(`transactions`.`invoice_no`) LIKE %caps% or ((`contacts`.`name` like %CAPS% or `contacts`.`supplier_business_name` like %CAPS%)) or LOWER(`contacts`.`mobile`) LIKE %caps% or LOWER(`transactions`.`total_items`) LIKE %caps% or LOWER(`transactions`.`payment_status`) LIKE %caps% or LOWER(`transactions`.`final_total`) LIKE %caps% or LOWER(`transactions`.`shipping_status`) LIKE %caps% or LOWER(`bl`.`name`) LIKE %caps% or LOWER(`tos`.`name`) LIKE %caps% or LOWER(`transactions`.`service_custom_field_1`) LIKE %caps% or LOWER(`u`.`first_name`) LIKE %caps% or LOWER(`transactions`.`additional_notes`) LIKE %caps% or LOWER(`transactions`.`staff_note`) LIKE %caps% or LOWER(`transactions`.`shipping_details`) LIKE %caps% or LOWER(`tables`.`name`) LIKE %caps% or LOWER(`ss`.`first_name`) LIKE %caps%) and (LOWER(`transactions`.`transaction_date`) LIKE %*% or LOWER(`transactions`.`invoice_no`) LIKE %*% or ((`contacts`.`name` like %*% or `contacts`.`supplier_business_name` like %*%)) or LOWER(`contacts`.`mobile`) LIKE %*% or LOWER(`transactions`.`total_items`) LIKE %*% or LOWER(`transactions`.`payment_status`) LIKE %*% or LOWER(`transactions`.`final_total`) LIKE %*% or LOWER(`transactions`.`shipping_status`) LIKE %*% or LOWER(`bl`.`name`) LIKE %*% or LOWER(`tos`.`name`) LIKE %*% or LOWER(`transactions`.`service_custom_field_1`) LIKE %*% or LOWER(`u`.`first_name`) LIKE %*% or LOWER(`transactions`.`additional_notes`) LIKE %*% or LOWER(`transactions`.`staff_note`) LIKE %*% or LOWER(`transactions`.`shipping_details`) LIKE %*% or LOWER(`tables`.`name`) LIKE %*% or LOWER(`ss`.`first_name`) LIKE %*%) and (LOWER(`transactions`.`transaction_date`) LIKE %10`% or LOWER(`transactions`.`invoice_no`) LIKE %10`% or ((`contacts`.`name` like %10`% or `contacts`.`supplier_business_name` like %10`%)) or LOWER(`contacts`.`mobile`) LIKE %10`% or LOWER(`transactions`.`total_items`) LIKE %10`% or LOWER(`transactions`.`payment_status`) LIKE %10`% or LOWER(`transactions`.`final_total`) LIKE %10`% or LOWER(`transactions`.`shipping_status`) LIKE %10`% or LOWER(`bl`.`name`) LIKE %10`% or LOWER(`tos`.`name`) LIKE %10`% or LOWER(`transactions`.`service_custom_field_1`) LIKE %10`% or LOWER(`u`.`first_name`) LIKE %10`% or LOWER(`transactions`.`additional_notes`) LIKE %10`% or LOWER(`transactions`.`staff_note`) LIKE %10`% or LOWER(`transactions`.`shipping_details`) LIKE %10`% or LOWER(`tables`.`name`) LIKE %10`% or LOWER(`ss`.`first_name`) LIKE %10`%) group by `transactions`.`id`) count_row_table) at /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Database/Connection.php:664, PDOException(code: 42S22): SQLSTATE[42S22]: Column not found: 1054 Unknown column 'transactions.total_items' in 'where clause' at /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Database/Connection.php:326)
[stacktrace]
#0 /home/wdatzrkn/public_html/tiba/vendor/yajra/laravel-datatables-oracle/src/QueryDataTable.php(106): Yajra\\DataTables\\DataTableAbstract->errorResponse(Object(Illuminate\\Database\\QueryException))
#1 /home/wdatzrkn/public_html/tiba/app/Http/Controllers/SellController.php(578): Yajra\\DataTables\\QueryDataTable->make(true)
#2 [internal function]: App\\Http\\Controllers\\SellController->index()
#3 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Controller.php(54): call_user_func_array(Array, Array)
#4 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(45): Illuminate\\Routing\\Controller->callAction('index', Array)
#5 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Route.php(219): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\SellController), 'index')
#6 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Route.php(176): Illuminate\\Routing\\Route->runController()
#7 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(680): Illuminate\\Routing\\Route->run()
#8 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(30): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#9 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/CheckUserLogin.php(22): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#10 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\CheckUserLogin->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#11 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#12 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/AdminSidebarMenu.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#13 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\AdminSidebarMenu->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#14 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#15 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/Timezone.php(30): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#16 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\Timezone->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#17 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminaline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#18 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/Language.php(27): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#19 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\Language->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#20 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#21 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/SetSessionData.php(53): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#22 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\SetSessionData->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#23 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#24 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/IsInstalled.php(51): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#25 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\IsInstalled->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#26 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#27 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(41): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#28 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Routing\\Middleware\\SubstituteBindings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#29 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#30 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(43): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#31 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Auth\\Middleware\\Authenticate->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#32 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#33 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(75): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#34 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\VerifyCsrfToken->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#35 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#36 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(49): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#37 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\View\\Middleware\\ShareErrorsFromSession->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#38 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#39 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(56): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#40 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Session\\Middleware\\StartSession->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#41 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#42 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(37): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#43 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Cookie\\Middleware\\AddQueuedCookiesToResponse->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#44 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#45 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(66): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#46 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Cookie\\Middleware\\EncryptCookies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#47 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#48 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(104): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#49 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(682): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#50 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(657): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#51 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(623): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#52 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(612): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#53 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(176): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#54 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(30): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#55 /home/wdatzrkn/public_html/tiba/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(58): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#56 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#57 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipelite\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#18 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/Language.php(27): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#19 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\Language->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#20 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#21 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/SetSessionData.php(53): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#22 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\SetSessionData->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#23 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#24 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/IsInstalled.php(51): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#25 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\IsInstalled->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#26 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#27 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(41): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#28 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Routing\\Middleware\\SubstituteBindings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#29 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#30 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(43): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#31 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Auth\\Middleware\\Authenticate->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#32 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#33 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(75): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#34 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\VerifyCsrfToken->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#35 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#36 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(49): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#37 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\View\\Middleware\\ShareErrorsFromSession->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#38 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#39 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(56): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#40 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Session\\Middleware\\StartSession->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#41 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#42 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(37): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#43 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Cookie\\Middleware\\AddQueuedCookiesToResponse->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#44 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#45 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(66): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#46 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Cookie\\Middleware\\EncryptCookies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#47 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#48 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(104): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#49 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(682): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#50 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(657): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#51 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(623): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#52 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(612): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#53 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(176): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#54 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(30): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#55 /home/wdatzrkn/public_html/tiba/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(58): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#56 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#57 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\ne->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#58 /home/wdatzrkn/public_html/tiba/vendor/fideloper/proxy/src/TrustProxies.php(57): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#59 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Fideloper\\Proxy\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#60 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#61 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#62 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#63 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#64 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#65 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#66 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#67 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#68 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#69 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#70 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/CheckForMaintenanceMode.php(62): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#71 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#72 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#73 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(104): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#74 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(151): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#75 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(116): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#76 /home/wdatzrkn/public_html/tiba/public/index.php(53): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#77 {main}
"} 
\Http\\Request))
#58 /home/wdatzrkn/public_html/tiba/vendor/fideloper/proxy/src/TrustProxies.php(57): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#59 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Fideloper\\Proxy\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#60 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#61 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#62 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#63 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#64 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#65 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#66 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#67 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#68 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#69 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#70 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/CheckForMaintenanceMode.php(62): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#71 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#72 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#73 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(104): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#74 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(151): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#75 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(116): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#76 /home/wdatzrkn/public_html/tiba/public/index.php(53): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#77 {main}
"} 
[2023-06-22 23:02:14] live.ERROR: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'transactions.total_items' in 'where clause' (SQL: select count(*) as aggregate from (select `transactions`.`id`, `transactions`.`transaction_date`, `transactions`.`type`, `transactions`.`is_direct_sale`, `transactions`.`invoice_no`, `transactions`.`invoice_no` as `invoice_no_text`, `contacts`.`name`, `contacts`.`mobile`, `contacts`.`contact_id`, `contacts`.`supplier_business_name`, `transactions`.`status`, `transactions`.`payment_status`, `transactions`.`final_total`, `transactions`.`tax_amount`, `transactions`.`discount_amount`, `transactions`.`discount_type`, `transactions`.`total_before_tax`, `transactions`.`rp_redeemed`, `transactions`.`rp_redeemed_amount`, `transactions`.`rp_earned`, `transactions`.`types_of_service_id`, `transactions`.`shipping_status`, `transactions`.`pay_term_number`, `transactions`.`pay_term_type`, `transactions`.`additional_notes`, `transactions`.`staff_note`, `transactions`.`shipping_details`, `transactions`.`document`, `transactions`.`shipping_custom_field_1`, `transactions`.`shipping_custom_field_2`, `transactions`.`shipping_custom_field_3`, `transactions`.`shipping_custom_field_4`, `transactions`.`shipping_custom_field_5`, `transactions`.`custom_field_1`, `transactions`.`custom_field_2`, `transactions`.`custom_field_3`, `transactions`.`custom_field_4`, DATE_FORMAT(transactions.transaction_date, "%Y/%m/%d") as sale_date, CONCAT(COALESCE(u.surname, ''),' ',COALESCE(u.first_name, ''),' ',COALESCE(u.last_name,'')) as added_by, (SELECT SUM(IF(TP.is_return = 1,-1*TP.amount,TP.amount)) FROM transaction_payments AS TP WHERE
                        TP.transaction_id=transactions.id) as total_paid, `bl`.`name` as `business_location`, COUNT(SR.id) as return_exists, (SELECT SUM(TP2.amount) FROM transaction_payments AS TP2 WHERE
                        TP2.transaction_id=SR.id ) as return_paid, COALESCE(SR.final_total, 0) as amount_return, `SR`.`id` as `return_transaction_id`, `tos`.`name` as `types_of_service_name`, `transactions`.`service_custom_field_1`, GROUP_CONCAT(pp.name SEPARATOR ' ------ ') as total_items, CONCAT(COALESCE(ss.surname, ''),' ',COALESCE(ss.first_name, ''),' ',COALESCE(ss.last_name,'')) as waiter, `tables`.`name` as `table_name`, SUM(tsl.quantity - tsl.so_quantity_invoiced) as so_qty_remaining, `transactions`.`is_export` from `transactions` left join `contacts` on `transactions`.`contact_id` = `contacts`.`id` left join `transaction_sell_lines` as `tsl` on `transactions`.`id` = `tsl`.`transaction_id` and `tsl`.`parent_sell_line_id` is null left join `users` as `u` on `transactions`.`created_by` = `u`.`id` left join `products` as `pp` on `tsl`.`product_id` = `pp`.`id` left join `users` as `ss` on `transactions`.`res_waiter_id` = `ss`.`id` left join `res_tables` as `tables` on `transactions`.`res_table_id` = `tables`.`id` inner join `business_locations` as `bl` on `transactions`.`location_id` = `bl`.`id` left join `transactions` as `SR` on `transactions`.`id` = `SR`.`return_parent_id` left join `types_of_services` as `tos` on `transactions`.`types_of_service_id` = `tos`.`id` where `transactions`.`business_id` = 20 and `transactions`.`type` = sell and `transactions`.`status` = final and date(`transactions`.`transaction_date`) >= 2023-01-01 and date(`transactions`.`transaction_date`) <= 2023-12-31 and `transactions`.`is_direct_sale` = 0 and `transactions`.`sub_type` is null and (LOWER(`transactions`.`transaction_date`) LIKE %neopeptine% or LOWER(`transactions`.`invoice_no`) LIKE %neopeptine% or ((`contacts`.`name` like %NEOPEPTINE% or `contacts`.`supplier_business_name` like %NEOPEPTINE%)) or LOWER(`contacts`.`mobile`) LIKE %neopeptine% or LOWER(`transactions`.`total_items`) LIKE %neopeptine% or LOWER(`transactions`.`payment_status`) LIKE %neopeptine% or LOWER(`transactions`.`final_total`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_status`) LIKE %neopeptine% or LOWER(`bl`.`name`) LIKE %neopeptine% or LOWER(`tos`.`name`) LIKE %neopeptine% or LOWER(`transactions`.`service_custom_field_1`) LIKE %neopeptine% or LOWER(`u`.`first_name`) LIKE %neopeptine% or LOWER(`transactions`.`additional_notes`) LIKE %neopeptine% or LOWER(`transactions`.`staff_note`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_details`) LIKE %neopeptine% or LOWER(`tables`.`name`) LIKE %neopeptine% or LOWER(`ss`.`first_name`) LIKE %neopeptine%) and (LOWER(`transactions`.`transaction_date`) LIKE %caps% or LOWER(`transactions`.`invoice_no`) LIKE %caps% or ((`contacts`.`name` like %CAPS% or `contacts`.`supplier_business_name` like %CAPS%)) or LOWER(`contacts`.`mobile`) LIKE %caps% or LOWER(`transactions`.`total_items`) LIKE %caps% or LOWER(`transactions`.`payment_status`) LIKE %caps% or LOWER(`transactions`.`final_total`) LIKE %caps% or LOWER(`transactions`.`shipping_status`) LIKE %caps% or LOWER(`bl`.`name`) LIKE %caps% or LOWER(`tos`.`name`) LIKE %caps% or LOWER(`transactions`.`service_custom_field_1`) LIKE %caps% or LOWER(`u`.`first_name`) LIKE %caps% or LOWER(`transactions`.`additional_notes`) LIKE %caps% or LOWER(`transactions`.`staff_note`) LIKE %caps% or LOWER(`transactions`.`shipping_details`) LIKE %caps% or LOWER(`tables`.`name`) LIKE %caps% or LOWER(`ss`.`first_name`) LIKE %caps%) and (LOWER(`transactions`.`transaction_date`) LIKE %*% or LOWER(`transactions`.`invoice_no`) LIKE %*% or ((`contacts`.`name` like %*% or `contacts`.`supplier_business_name` like %*%)) or LOWER(`contacts`.`mobile`) LIKE %*% or LOWER(`transactions`.`total_items`) LIKE %*% or LOWER(`transactions`.`payment_status`) LIKE %*% or LOWER(`transactions`.`final_total`) LIKE %*% or LOWER(`transactions`.`shipping_status`) LIKE %*% or LOWER(`bl`.`name`) LIKE %*% or LOWER(`tos`.`name`) LIKE %*% or LOWER(`transactions`.`service_custom_field_1`) LIKE %*% or LOWER(`u`.`first_name`) LIKE %*% or LOWER(`transactions`.`additional_notes`) LIKE %*% or LOWER(`transactions`.`staff_note`) LIKE %*% or LOWER(`transactions`.`shipping_details`) LIKE %*% or LOWER(`tables`.`name`) LIKE %*% or LOWER(`ss`.`first_name`) LIKE %*%) and (LOWER(`transactions`.`transaction_date`) LIKE %10% or LOWER(`transactions`.`invoice_no`) LIKE %10% or ((`contacts`.`name` like %10% or `contacts`.`supplier_business_name` like %10%)) or LOWER(`contacts`.`mobile`) LIKE %10% or LOWER(`transactions`.`total_items`) LIKE %10% or LOWER(`transactions`.`payment_status`) LIKE %10% or LOWER(`transactions`.`final_total`) LIKE %10% or LOWER(`transactions`.`shipping_status`) LIKE %10% or LOWER(`bl`.`name`) LIKE %10% or LOWER(`tos`.`name`) LIKE %10% or LOWER(`transactions`.`service_custom_field_1`) LIKE %10% or LOWER(`u`.`first_name`) LIKE %10% or LOWER(`transactions`.`additional_notes`) LIKE %10% or LOWER(`transactions`.`staff_note`) LIKE %10% or LOWER(`transactions`.`shipping_details`) LIKE %10% or LOWER(`tables`.`name`) LIKE %10% or LOWER(`ss`.`first_name`) LIKE %10%) group by `transactions`.`id`) count_row_table) {"userId":30,"exception":"[object] (Yajra\\DataTables\\Exceptions\\Exception(code: 0): SQLSTATE[42S22]: Column not found: 1054 Unknown column 'transactions.total_items' in 'where clause' (SQL: select count(*) as aggregate from (select `transactions`.`id`, `transactions`.`transaction_date`, `transactions`.`type`, `transactions`.`is_direct_sale`, `transactions`.`invoice_no`, `transactions`.`invoice_no` as `invoice_no_text`, `contacts`.`name`, `contacts`.`mobile`, `contacts`.`contact_id`, `contacts`.`supplier_business_name`, `transactions`.`status`, `transactions`.`payment_status`, `transactions`.`final_total`, `transactions`.`tax_amount`, `transactions`.`discount_amount`, `transactions`.`discount_type`, `transactions`.`total_before_tax`, `transactions`.`rp_redeemed`, `transactions`.`rp_redeemed_amount`, `transactions`.`rp_earned`, `transactions`.`types_of_service_id`, `transactions`.`shipping_status`, `transactions`.`pay_term_number`, `transactions`.`pay_term_type`, `transactions`.`additional_notes`, `transactions`.`staff_note`, `transactions`.`shipping_details`, `transactions`.`document`, `transactions`.`shipping_custom_field_1`, `transactions`.`shipping_custom_field_2`, `transactions`.`shipping_custom_field_3`, `transactions`.`shipping_custom_field_4`, `transactions`.`shipping_custom_field_5`, `transactions`.`custom_field_1`, `transactions`.`custom_field_2`, `transactions`.`custom_field_3`, `transactions`.`custom_field_4`, DATE_FORMAT(transactions.transaction_date, \"%Y/%m/%d\") as sale_date, CONCAT(COALESCE(u.surname, ''),' ',COALESCE(u.first_name, ''),' ',COALESCE(u.last_name,'')) as added_by, (SELECT SUM(IF(TP.is_return = 1,-1*TP.amount,TP.amount)) FROM transaction_payments AS TP WHERE
                        TP.transaction_id=transactions.id) as total_paid, `bl`.`name` as `business_location`, COUNT(SR.id) as return_exists, (SELECT SUM(TP2.amount) FROM transaction_payments AS TP2 WHERE
                        TP2.transaction_id=SR.id ) as return_paid, COALESCE(SR.final_total, 0) as amount_return, `SR`.`id` as `return_transaction_id`, `tos`.`name` as `types_of_service_name`, `transactions`.`service_custom_field_1`, GROUP_CONCAT(pp.name SEPARATOR ' ------ ') as total_items, CONCAT(COALESCE(ss.surname, ''),' ',COALESCE(ss.first_name, ''),' ',COALESCE(ss.last_name,'')) as waiter, `tables`.`name` as `table_name`, SUM(tsl.quantity - tsl.so_quantity_invoiced) as so_qty_remaining, `transactions`.`is_export` from `transactions` left join `contacts` on `transactions`.`contact_id` = `contacts`.`id` left join `transaction_sell_lines` as `tsl` on `transactions`.`id` = `tsl`.`transaction_id` and `tsl`.`parent_sell_line_id` is null left join `users` as `u` on `transactions`.`created_by` = `u`.`id` left join `products` as `pp` on `tsl`.`product_id` = `pp`.`id` left join `users` as `ss` on `transactions`.`res_waiter_id` = `ss`.`id` left join `res_tables` as `tables` on `transactions`.`res_table_id` = `tables`.`id` inner join `business_locations` as `bl` on `transactions`.`location_id` = `bl`.`id` left join `transactions` as `SR` on `transactions`.`id` = `SR`.`return_parent_id` left join `types_of_services` as `tos` on `transactions`.`types_of_service_id` = `tos`.`id` where `transactions`.`business_id` = 20 and `transactions`.`type` = sell and `transactions`.`status` = final and date(`transactions`.`transaction_date`) >= 2023-01-01 and date(`transactions`.`transaction_date`) <= 2023-12-31 and `transactions`.`is_direct_sale` = 0 and `transactions`.`sub_type` is null and (LOWER(`transactions`.`transaction_date`) LIKE %neopeptine% or LOWER(`transactions`.`invoice_no`) LIKE %neopeptine% or ((`contacts`.`name` like %NEOPEPTINE% or `contacts`.`supplier_business_name` like %NEOPEPTINE%)) or LOWER(`contacts`.`mobile`) LIKE %neopeptine% or LOWER(`transactions`.`total_items`) LIKE %neopeptine% or LOWER(`transactions`.`payment_status`) LIKE %neopeptine% or LOWER(`transactions`.`final_total`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_status`) LIKE %neopeptine% or LOWER(`bl`.`name`) LIKE %neopeptine% or LOWER(`tos`.`name`) LIKE %neopeptine% or LOWER(`transactions`.`service_custom_field_1`) LIKE %neopeptine% or LOWER(`u`.`first_name`) LIKE %neopeptine% or LOWER(`transactions`.`additional_notes`) LIKE %neopeptine% or LOWER(`transactions`.`staff_note`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_details`) LIKE %neopeptine% or LOWER(`tables`.`name`) LIKE %neopeptine% or LOWER(`ss`.`first_name`) LIKE %neopeptine%) and (LOWER(`transactions`.`transaction_date`) LIKE %caps% or LOWER(`transactions`.`invoice_no`) LIKE %caps% or ((`contacts`.`name` like %CAPS% or `contacts`.`supplier_business_name` like %CAPS%)) or LOWER(`contacts`.`mobile`) LIKE %caps% or LOWER(`transactions`.`total_items`) LIKE %caps% or LOWER(`transactions`.`payment_status`) LIKE %caps% or LOWER(`transactions`.`final_total`) LIKE %caps% or LOWER(`transactions`.`shipping_status`) LIKE %caps% or LOWER(`bl`.`name`) LIKE %caps% or LOWER(`tos`.`name`) LIKE %caps% or LOWER(`transactions`.`service_custom_field_1`) LIKE %caps% or LOWER(`u`.`first_name`) LIKE %caps% or LOWER(`transactions`.`additional_notes`) LIKE %caps% or LOWER(`transactions`.`staff_note`) LIKE %caps% or LOWER(`transactions`.`shipping_details`) LIKE %caps% or LOWER(`tables`.`name`) LIKE %caps% or LOWER(`ss`.`first_name`) LIKE %caps%) and (LOWER(`transactions`.`transaction_date`) LIKE %*% or LOWER(`transactions`.`invoice_no`) LIKE %*% or ((`contacts`.`name` like %*% or `contacts`.`supplier_business_name` like %*%)) or LOWER(`contacts`.`mobile`) LIKE %*% or LOWER(`transactions`.`total_items`) LIKE %*% or LOWER(`transactions`.`payment_status`) LIKE %*% or LOWER(`transactions`.`final_total`) LIKE %*% or LOWER(`transactions`.`shipping_status`) LIKE %*% or LOWER(`bl`.`name`) LIKE %*% or LOWER(`tos`.`name`) LIKE %*% or LOWER(`transactions`.`service_custom_field_1`) LIKE %*% or LOWER(`u`.`first_name`) LIKE %*% or LOWER(`transactions`.`additional_notes`) LIKE %*% or LOWER(`transactions`.`staff_note`) LIKE %*% or LOWER(`transactions`.`shipping_details`) LIKE %*% or LOWER(`tables`.`name`) LIKE %*% or LOWER(`ss`.`first_name`) LIKE %*%) and (LOWER(`transactions`.`transaction_date`) LIKE %10% or LOWER(`transactions`.`invoice_no`) LIKE %10% or ((`contacts`.`name` like %10% or `contacts`.`supplier_business_name` like %10%)) or LOWER(`contacts`.`mobile`) LIKE %10% or LOWER(`transactions`.`total_items`) LIKE %10% or LOWER(`transactions`.`payment_status`) LIKE %10% or LOWER(`transactions`.`final_total`) LIKE %10% or LOWER(`transactions`.`shipping_status`) LIKE %10% or LOWER(`bl`.`name`) LIKE %10% or LOWER(`tos`.`name`) LIKE %10% or LOWER(`transactions`.`service_custom_field_1`) LIKE %10% or LOWER(`u`.`first_name`) LIKE %10% or LOWER(`transactions`.`additional_notes`) LIKE %10% or LOWER(`transactions`.`staff_note`) LIKE %10% or LOWER(`transactions`.`shipping_details`) LIKE %10% or LOWER(`tables`.`name`) LIKE %10% or LOWER(`ss`.`first_name`) LIKE %10%) group by `transactions`.`id`) count_row_table) at /home/wdatzrkn/public_html/tiba/vendor/yajra/laravel-datatables-oracle/src/DataTableAbstract.php:875, Illuminate\\Database\\QueryException(code: 42S22): SQLSTATE[42S22]: Column not found: 1054 Unknown column 'transactions.total_items' in 'where clause' (SQL: select count(*) as aggregate from (select `transactions`.`id`, `transactions`.`transaction_date`, `transactions`.`type`, `transactions`.`is_direct_sale`, `transactions`.`invoice_no`, `transactions`.`invoice_no` as `invoice_no_text`, `contacts`.`name`, `contacts`.`mobile`, `contacts`.`contact_id`, `contacts`.`supplier_business_name`, `transactions`.`status`, `transactions`.`payment_status`, `transactions`.`final_total`, `transactions`.`tax_amount`, `transactions`.`discount_amount`, `transactions`.`discount_type`, `transactions`.`total_before_tax`, `transactions`.`rp_redeemed`, `transactions`.`rp_redeemed_amount`, `transactions`.`rp_earned`, `transactions`.`types_of_service_id`, `transactions`.`shipping_status`, `transactions`.`pay_term_number`, `transactions`.`pay_term_type`, `transactions`.`additional_notes`, `transactions`.`staff_note`, `transactions`.`shipping_details`, `transactions`.`document`, `transactions`.`shipping_custom_field_1`, `transactions`.`shipping_custom_field_2`, `transactions`.`shipping_custom_field_3`, `transactions`.`shipping_custom_field_4`, `transactions`.`shipping_custom_field_5`, `transactions`.`custom_field_1`, `transactions`.`custom_field_2`, `transactions`.`custom_field_3`, `transactions`.`custom_field_4`, DATE_FORMAT(transactions.transaction_date, \"%Y/%m/%d\") as sale_date, CONCAT(COALESCE(u.surname, ''),' ',COALESCE(u.first_name, ''),' ',COALESCE(u.last_name,'')) as added_by, (SELECT SUM(IF(TP.is_return = 1,-1*TP.amount,TP.amount)) FROM transaction_payments AS TP WHERE
                        TP.transaction_id=transactions.id) as total_paid, `bl`.`name` as `business_location`, COUNT(SR.id) as return_exists, (SELECT SUM(TP2.amount) FROM transaction_payments AS TP2 WHERE
                        TP2.transaction_id=SR.id ) as return_paid, COALESCE(SR.final_total, 0) as amount_return, `SR`.`id` as `return_transaction_id`, `tos`.`name` as `types_of_service_name`, `transactions`.`service_custom_field_1`, GROUP_CONCAT(pp.name SEPARATOR ' ------ ') as total_items, CONCAT(COALESCE(ss.surname, ''),' ',COALESCE(ss.first_name, ''),' ',COALESCE(ss.last_name,'')) as waiter, `tables`.`name` as `table_name`, SUM(tsl.quantity - tsl.so_quantity_invoiced) as so_qty_remaining, `transactions`.`is_export` from `transactions` left join `contacts` on `transactions`.`contact_id` = `contacts`.`id` left join `transaction_sell_lines` as `tsl` on `transactions`.`id` = `tsl`.`transaction_id` and `tsl`.`parent_sell_line_id` is null left join `users` as `u` on `transactions`.`created_by` = `u`.`id` left join `products` as `pp` on `tsl`.`product_id` = `pp`.`id` left join `users` as `ss` on `transactions`.`res_waiter_id` = `ss`.`id` left join `res_tables` as `tables` on `transactions`.`res_table_id` = `tables`.`id` inner join `business_locations` as `bl` on `transactions`.`location_id` = `bl`.`id` left join `transactions` as `SR` on `transactions`.`id` = `SR`.`return_parent_id` left join `types_of_services` as `tos` on `transactions`.`types_of_service_id` = `tos`.`id` where `transactions`.`business_id` = 20 and `transactions`.`type` = sell and `transactions`.`status` = final and date(`transactions`.`transaction_date`) >= 2023-01-01 and date(`transactions`.`transaction_date`) <= 2023-12-31 and `transactions`.`is_direct_sale` = 0 and `transactions`.`sub_type` is null and (LOWER(`transactions`.`transaction_date`) LIKE %neopeptine% or LOWER(`transactions`.`invoice_no`) LIKE %neopeptine% or ((`contacts`.`name` like %NEOPEPTINE% or `contacts`.`supplier_business_name` like %NEOPEPTINE%)) or LOWER(`contacts`.`mobile`) LIKE %neopeptine% or LOWER(`transactions`.`total_items`) LIKE %neopeptine% or LOWER(`transactions`.`payment_status`) LIKE %neopeptine% or LOWER(`transactions`.`final_total`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_status`) LIKE %neopeptine% or LOWER(`bl`.`name`) LIKE %neopeptine% or LOWER(`tos`.`name`) LIKE %neopeptine% or LOWER(`transactions`.`service_custom_field_1`) LIKE %neopeptine% or LOWER(`u`.`first_name`) LIKE %neopeptine% or LOWER(`transactions`.`additional_notes`) LIKE %neopeptine% or LOWER(`transactions`.`staff_note`) LIKE %neopeptine% or LOWER(`transactions`.`shipping_details`) LIKE %neopeptine% or LOWER(`tables`.`name`) LIKE %neopeptine% or LOWER(`ss`.`first_name`) LIKE %neopeptine%) and (LOWER(`transactions`.`transaction_date`) LIKE %caps% or LOWER(`transactions`.`invoice_no`) LIKE %caps% or ((`contacts`.`name` like %CAPS% or `contacts`.`supplier_business_name` like %CAPS%)) or LOWER(`contacts`.`mobile`) LIKE %caps% or LOWER(`transactions`.`total_items`) LIKE %caps% or LOWER(`transactions`.`payment_status`) LIKE %caps% or LOWER(`transactions`.`final_total`) LIKE %caps% or LOWER(`transactions`.`shipping_status`) LIKE %caps% or LOWER(`bl`.`name`) LIKE %caps% or LOWER(`tos`.`name`) LIKE %caps% or LOWER(`transactions`.`service_custom_field_1`) LIKE %caps% or LOWER(`u`.`first_name`) LIKE %caps% or LOWER(`transactions`.`additional_notes`) LIKE %caps% or LOWER(`transactions`.`staff_note`) LIKE %caps% or LOWER(`transactions`.`shipping_details`) LIKE %caps% or LOWER(`tables`.`name`) LIKE %caps% or LOWER(`ss`.`first_name`) LIKE %caps%) and (LOWER(`transactions`.`transaction_date`) LIKE %*% or LOWER(`transactions`.`invoice_no`) LIKE %*% or ((`contacts`.`name` like %*% or `contacts`.`supplier_business_name` like %*%)) or LOWER(`contacts`.`mobile`) LIKE %*% or LOWER(`transactions`.`total_items`) LIKE %*% or LOWER(`transactions`.`payment_status`) LIKE %*% or LOWER(`transactions`.`final_total`) LIKE %*% or LOWER(`transactions`.`shipping_status`) LIKE %*% or LOWER(`bl`.`name`) LIKE %*% or LOWER(`tos`.`name`) LIKE %*% or LOWER(`transactions`.`service_custom_field_1`) LIKE %*% or LOWER(`u`.`first_name`) LIKE %*% or LOWER(`transactions`.`additional_notes`) LIKE %*% or LOWER(`transactions`.`staff_note`) LIKE %*% or LOWER(`transactions`.`shipping_details`) LIKE %*% or LOWER(`tables`.`name`) LIKE %*% or LOWER(`ss`.`first_name`) LIKE %*%) and (LOWER(`transactions`.`transaction_date`) LIKE %10% or LOWER(`transactions`.`invoice_no`) LIKE %10% or ((`contacts`.`name` like %10% or `contacts`.`supplier_business_name` like %10%)) or LOWER(`contacts`.`mobile`) LIKE %10% or LOWER(`transactions`.`total_items`) LIKE %10% or LOWER(`transactions`.`payment_status`) LIKE %10% or LOWER(`transactions`.`final_total`) LIKE %10% or LOWER(`transactions`.`shipping_status`) LIKE %10% or LOWER(`bl`.`name`) LIKE %10% or LOWER(`tos`.`name`) LIKE %10% or LOWER(`transactions`.`service_custom_field_1`) LIKE %10% or LOWER(`u`.`first_name`) LIKE %10% or LOWER(`transactions`.`additional_notes`) LIKE %10% or LOWER(`transactions`.`staff_note`) LIKE %10% or LOWER(`transactions`.`shipping_details`) LIKE %10% or LOWER(`tables`.`name`) LIKE %10% or LOWER(`ss`.`first_name`) LIKE %10%) group by `transactions`.`id`) count_row_table) at /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Database/Connection.php:664, PDOException(code: 42S22): SQLSTATE[42S22]: Column not found: 1054 Unknown column 'transactions.total_items' in 'where clause' at /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Database/Connection.php:326)
[stacktrace]
#0 /home/wdatzrkn/public_html/tiba/vendor/yajra/laravel-datatables-oracle/src/QueryDataTable.php(106): Yajra\\DataTables\\DataTableAbstract->errorResponse(Object(Illuminate\\Database\\QueryException))
#1 /home/wdatzrkn/public_html/tiba/app/Http/Controllers/SellController.php(578): Yajra\\DataTables\\QueryDataTable->make(true)
#2 [internal function]: App\\Http\\Controllers\\SellController->index()
#3 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Controller.php(54): call_user_func_array(Array, Array)
#4 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(45): Illuminate\\Routing\\Controller->callAction('index', Array)
#5 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Route.php(219): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\SellController), 'index')
#6 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Route.php(176): Illuminate\\Routing\\Route->runController()
#7 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(680): Illuminate\\Routing\\Route->run()
#8 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(30): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#9 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/CheckUserLogin.php(22): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#10 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\CheckUserLogin->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#11 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#12 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/AdminSidebarMenu.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#13 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\AdminSidebarMenu->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#14 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#15 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/Timezone.php(30): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#16 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\Timezone->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#17 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#18 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/Language.php(27): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#19 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\Language->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#20 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#21 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/SetSessionData.php(53): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#22 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\SetSessionData->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#23 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#24 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/IsInstalled.php(51): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#25 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\IsInstalled->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#26 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#27 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(41): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#28 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Routing\\Middleware\\SubstituteBindings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#29 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#30 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(43): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#31 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Auth\\Middleware\\Authenticate->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#32 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#33 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(75): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#34 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\VerifyCsrfToken->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#35 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#36 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(49): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#37 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\View\\Middleware\\ShareErrorsFromSession->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#38 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#39 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(56): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#40 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Session\\Middleware\\StartSession->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#41 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#42 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(37): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#43 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Cookie\\Middleware\\AddQueuedCookiesToResponse->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#44 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#45 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(66): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#46 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Cookie\\Middleware\\EncryptCookies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#47 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#48 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(104): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#49 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(682): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#50 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(657): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#51 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(623): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#52 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(612): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#53 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(176): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#54 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(30): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#55 /home/wdatzrkn/public_html/tiba/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(58): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#56 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#57 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#58 /home/wdatzrkn/public_html/tiba/vendor/fideloper/proxy/src/TrustProxies.php(57): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#59 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Fideloper\\Proxy\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#60 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#61 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#62 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#63 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#64 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#65 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#66 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#67 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#68 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#69 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#70 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/CheckForMaintenanceMode.php(62): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#71 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#72 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#73 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(104): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#74 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(151): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#75 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(116): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#76 /home/wdatzrkn/public_html/tiba/public/index.php(53): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#77 {main}
"} 
[2023-06-22 23:02:15] live.ERROR: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'transactions.total_items' in 'where clause' (SQL: select count(*) as aggregate from (select `transactions`.`id`, `transactions`.`transaction_date`, `transactions`.`type`, `transactions`.`is_direct_sale`, `transactions`.`invoice_no`, `transactions`.`invoice_no` as `invoice_no_text`, `contacts`.`name`, `contacts`.`mobile`, `contacts`.`contact_id`, `contacts`.`supplier_business_name`, `transactions`.`status`, `transactions`.`payment_status`, `transactions`.`final_total`, `transactions`.`tax_amount`, `transactions`.`discount_amount`, `transactions`.`discount_type`, `transactions`.`total_before_tax`, `transactions`.`rp_redeemed`, `transactions`.`rp_redeemed_amount`, `transactions`.`rp_earned`, `transactions`.`types_of_service_id`, `transactions`.`shipping_status`, `transactions`.`pay_term_number`, `transactions`.`pay_term_type`, `transactions`.`additional_notes`, `transactions`.`staff_note`, `transactions`.`shipping_details`, `transactions`.`document`, `transactions`.`shipping_custom_field_1`, `transactions`.`shipping_custom_field_2`, `transactions`.`shipping_custom_field_3`, `transactions`.`shipping_custom_field_4`, `transactions`.`shipping_custom_field_5`, `transactions`.`custom_field_1`, `transactions`.`custom_field_2`, `transactions`.`custom_field_3`, `transactions`.`custom_field_4`, DATE_FORMAT(transactions.transaction_date, "%Y/%m/%d") as sale_date, CONCAT(COALESCE(u.surname, ''),' ',COALESCE(u.first_name, ''),' ',COALESCE(u.last_name,'')) as added_by, (SELECT SUM(IF(TP.is_return = 1,-1*TP.amount,TP.amount)) FROM transaction_payments AS TP WHERE
                        TP.transaction_id=transactions.id) as total_paid, `bl`.`name` as `business_location`, COUNT(SR.id) as return_exists, (SELECT SUM(TP2.amount) FROM transaction_payments AS TP2 WHERE
                        TP2.transaction_id=SR.id ) as return_paid, COALESCE(SR.final_total, 0) as amount_return, `SR`.`id` as `return_transaction_id`, `tos`.`name` as `types_of_service_name`, `transactions`.`service_custom_field_1`, GROUP_CONCAT(pp.name SEPARATOR ' ------ ') as total_items, CONCAT(COALESCE(ss.surname, ''),' ',COALESCE(ss.first_name, ''),' ',COALESCE(ss.last_name,'')) as waiter, `tables`.`name` as `table_name`, SUM(tsl.quantity - tsl.so_quantity_invoiced) as so_qty_remaining, `transactions`.`is_export` from `transactions` left join `contacts` on `transactions`.`contact_id` = `contacts`.`id` left join `transaction_sell_lines` as `tsl` on `transactions`.`id` = `tsl`.`transaction_id` and `tsl`.`parent_sell_line_id` is null left join `users` as `u` on `transactions`.`created_by` = `u`.`id` left join `products` as `pp` on `tsl`.`product_id` = `pp`.`id` left join `users` as `ss` on `transactions`.`res_waiter_id` = `ss`.`id` left join `res_tables` as `tables` on `transactions`.`res_table_id` = `tables`.`id` inner join `business_locations` as `bl` on `transactions`.`location_id` = `bl`.`id` left join `transactions` as `SR` on `transactions`.`id` = `SR`.`return_parent_id` left join `types_of_services` as `tos` on `transactions`.`types_of_service_id` = `tos`.`id` where `transactions`.`business_id` = 20 and `transactions`.`type` = sell and `transactions`.`status` = final and date(`transactions`.`transaction_date`) >= 2023-01-01 and date(`transactions`.`transaction_date`) <= 2023-12-31 and `transactions`.`is_direct_sale` = 0 and `transactions`.`sub_type` is null and (LOWER(`transactions`.`transaction_date`) LIKE %neopept% or LOWER(`transactions`.`invoice_no`) LIKE %neopept% or ((`contacts`.`name` like %NEOPEPT% or `contacts`.`supplier_business_name` like %NEOPEPT%)) or LOWER(`contacts`.`mobile`) LIKE %neopept% or LOWER(`transactions`.`total_items`) LIKE %neopept% or LOWER(`transactions`.`payment_status`) LIKE %neopept% or LOWER(`transactions`.`final_total`) LIKE %neopept% or LOWER(`transactions`.`shipping_status`) LIKE %neopept% or LOWER(`bl`.`name`) LIKE %neopept% or LOWER(`tos`.`name`) LIKE %neopept% or LOWER(`transactions`.`service_custom_field_1`) LIKE %neopept% or LOWER(`u`.`first_name`) LIKE %neopept% or LOWER(`transactions`.`additional_notes`) LIKE %neopept% or LOWER(`transactions`.`staff_note`) LIKE %neopept% or LOWER(`transactions`.`shipping_details`) LIKE %neopept% or LOWER(`tables`.`name`) LIKE %neopept% or LOWER(`ss`.`first_name`) LIKE %neopept%) group by `transactions`.`id`) count_row_table) {"userId":30,"exception":"[object] (Yajra\\DataTables\\Exceptions\\Exception(code: 0): SQLSTATE[42S22]: Column not found: 1054 Unknown column 'transactions.total_items' in 'where clause' (SQL: select count(*) as aggregate from (select `transactions`.`id`, `transactions`.`transaction_date`, `transactions`.`type`, `transactions`.`is_direct_sale`, `transactions`.`invoice_no`, `transactions`.`invoice_no` as `invoice_no_text`, `contacts`.`name`, `contacts`.`mobile`, `contacts`.`contact_id`, `contacts`.`supplier_business_name`, `transactions`.`status`, `transactions`.`payment_status`, `transactions`.`final_total`, `transactions`.`tax_amount`, `transactions`.`discount_amount`, `transactions`.`discount_type`, `transactions`.`total_before_tax`, `transactions`.`rp_redeemed`, `transactions`.`rp_redeemed_amount`, `transactions`.`rp_earned`, `transactions`.`types_of_service_id`, `transactions`.`shipping_status`, `transactions`.`pay_term_number`, `transactions`.`pay_term_type`, `transactions`.`additional_notes`, `transactions`.`staff_note`, `transactions`.`shipping_details`, `transactions`.`document`, `transactions`.`shipping_custom_field_1`, `transactions`.`shipping_custom_field_2`, `transactions`.`shipping_custom_field_3`, `transactions`.`shipping_custom_field_4`, `transactions`.`shipping_custom_field_5`, `transactions`.`custom_field_1`, `transactions`.`custom_field_2`, `transactions`.`custom_field_3`, `transactions`.`custom_field_4`, DATE_FORMAT(transactions.transaction_date, \"%Y/%m/%d\") as sale_date, CONCAT(COALESCE(u.surname, ''),' ',COALESCE(u.first_name, ''),' ',COALESCE(u.last_name,'')) as added_by, (SELECT SUM(IF(TP.is_return = 1,-1*TP.amount,TP.amount)) FROM transaction_payments AS TP WHERE
                        TP.transaction_id=transactions.id) as total_paid, `bl`.`name` as `business_location`, COUNT(SR.id) as return_exists, (SELECT SUM(TP2.amount) FROM transaction_payments AS TP2 WHERE
                        TP2.transaction_id=SR.id ) as return_paid, COALESCE(SR.final_total, 0) as amount_return, `SR`.`id` as `return_transaction_id`, `tos`.`name` as `types_of_service_name`, `transactions`.`service_custom_field_1`, GROUP_CONCAT(pp.name SEPARATOR ' ------ ') as total_items, CONCAT(COALESCE(ss.surname, ''),' ',COALESCE(ss.first_name, ''),' ',COALESCE(ss.last_name,'')) as waiter, `tables`.`name` as `table_name`, SUM(tsl.quantity - tsl.so_quantity_invoiced) as so_qty_remaining, `transactions`.`is_export` from `transactions` left join `contacts` on `transactions`.`contact_id` = `contacts`.`id` left join `transaction_sell_lines` as `tsl` on `transactions`.`id` = `tsl`.`transaction_id` and `tsl`.`parent_sell_line_id` is null left join `users` as `u` on `transactions`.`created_by` = `u`.`id` left join `products` as `pp` on `tsl`.`product_id` = `pp`.`id` left join `users` as `ss` on `transactions`.`res_waiter_id` = `ss`.`id` left join `res_tables` as `tables` on `transactions`.`res_table_id` = `tables`.`id` inner join `business_locations` as `bl` on `transactions`.`location_id` = `bl`.`id` left join `transactions` as `SR` on `transactions`.`id` = `SR`.`return_parent_id` left join `types_of_services` as `tos` on `transactions`.`types_of_service_id` = `tos`.`id` where `transactions`.`business_id` = 20 and `transactions`.`type` = sell and `transactions`.`status` = final and date(`transactions`.`transaction_date`) >= 2023-01-01 and date(`transactions`.`transaction_date`) <= 2023-12-31 and `transactions`.`is_direct_sale` = 0 and `transactions`.`sub_type` is null and (LOWER(`transactions`.`transaction_date`) LIKE %neopept% or LOWER(`transactions`.`invoice_no`) LIKE %neopept% or ((`contacts`.`name` like %NEOPEPT% or `contacts`.`supplier_business_name` like %NEOPEPT%)) or LOWER(`contacts`.`mobile`) LIKE %neopept% or LOWER(`transactions`.`total_items`) LIKE %neopept% or LOWER(`transactions`.`payment_status`) LIKE %neopept% or LOWER(`transactions`.`final_total`) LIKE %neopept% or LOWER(`transactions`.`shipping_status`) LIKE %neopept% or LOWER(`bl`.`name`) LIKE %neopept% or LOWER(`tos`.`name`) LIKE %neopept% or LOWER(`transactions`.`service_custom_field_1`) LIKE %neopept% or LOWER(`u`.`first_name`) LIKE %neopept% or LOWER(`transactions`.`additional_notes`) LIKE %neopept% or LOWER(`transactions`.`staff_note`) LIKE %neopept% or LOWER(`transactions`.`shipping_details`) LIKE %neopept% or LOWER(`tables`.`name`) LIKE %neopept% or LOWER(`ss`.`first_name`) LIKE %neopept%) group by `transactions`.`id`) count_row_table) at /home/wdatzrkn/public_html/tiba/vendor/yajra/laravel-datatables-oracle/src/DataTableAbstract.php:875, Illuminate\\Database\\QueryException(code: 42S22): SQLSTATE[42S22]: Column not found: 1054 Unknown column 'transactions.total_items' in 'where clause' (SQL: select count(*) as aggregate from (select `transactions`.`id`, `transactions`.`transaction_date`, `transactions`.`type`, `transactions`.`is_direct_sale`, `transactions`.`invoice_no`, `transactions`.`invoice_no` as `invoice_no_text`, `contacts`.`name`, `contacts`.`mobile`, `contacts`.`contact_id`, `contacts`.`supplier_business_name`, `transactions`.`status`, `transactions`.`payment_status`, `transactions`.`final_total`, `transactions`.`tax_amount`, `transactions`.`discount_amount`, `transactions`.`discount_type`, `transactions`.`total_before_tax`, `transactions`.`rp_redeemed`, `transactions`.`rp_redeemed_amount`, `transactions`.`rp_earned`, `transactions`.`types_of_service_id`, `transactions`.`shipping_status`, `transactions`.`pay_term_number`, `transactions`.`pay_term_type`, `transactions`.`additional_notes`, `transactions`.`staff_note`, `transactions`.`shipping_details`, `transactions`.`document`, `transactions`.`shipping_custom_field_1`, `transactions`.`shipping_custom_field_2`, `transactions`.`shipping_custom_field_3`, `transactions`.`shipping_custom_field_4`, `transactions`.`shipping_custom_field_5`, `transactions`.`custom_field_1`, `transactions`.`custom_field_2`, `transactions`.`custom_field_3`, `transactions`.`custom_field_4`, DATE_FORMAT(transactions.transaction_date, \"%Y/%m/%d\") as sale_date, CONCAT(COALESCE(u.surname, ''),' ',COALESCE(u.first_name, ''),' ',COALESCE(u.last_name,'')) as added_by, (SELECT SUM(IF(TP.is_return = 1,-1*TP.amount,TP.amount)) FROM transaction_payments AS TP WHERE
                        TP.transaction_id=transactions.id) as total_paid, `bl`.`name` as `business_location`, COUNT(SR.id) as return_exists, (SELECT SUM(TP2.amount) FROM transaction_payments AS TP2 WHERE
                        TP2.transaction_id=SR.id ) as return_paid, COALESCE(SR.final_total, 0) as amount_return, `SR`.`id` as `return_transaction_id`, `tos`.`name` as `types_of_service_name`, `transactions`.`service_custom_field_1`, GROUP_CONCAT(pp.name SEPARATOR ' ------ ') as total_items, CONCAT(COALESCE(ss.surname, ''),' ',COALESCE(ss.first_name, ''),' ',COALESCE(ss.last_name,'')) as waiter, `tables`.`name` as `table_name`, SUM(tsl.quantity - tsl.so_quantity_invoiced) as so_qty_remaining, `transactions`.`is_export` from `transactions` left join `contacts` on `transactions`.`contact_id` = `contacts`.`id` left join `transaction_sell_lines` as `tsl` on `transactions`.`id` = `tsl`.`transaction_id` and `tsl`.`parent_sell_line_id` is null left join `users` as `u` on `transactions`.`created_by` = `u`.`id` left join `products` as `pp` on `tsl`.`product_id` = `pp`.`id` left join `users` as `ss` on `transactions`.`res_waiter_id` = `ss`.`id` left join `res_tables` as `tables` on `transactions`.`res_table_id` = `tables`.`id` inner join `business_locations` as `bl` on `transactions`.`location_id` = `bl`.`id` left join `transactions` as `SR` on `transactions`.`id` = `SR`.`return_parent_id` left join `types_of_services` as `tos` on `transactions`.`types_of_service_id` = `tos`.`id` where `transactions`.`business_id` = 20 and `transactions`.`type` = sell and `transactions`.`status` = final and date(`transactions`.`transaction_date`) >= 2023-01-01 and date(`transactions`.`transaction_date`) <= 2023-12-31 and `transactions`.`is_direct_sale` = 0 and `transactions`.`sub_type` is null and (LOWER(`transactions`.`transaction_date`) LIKE %neopept% or LOWER(`transactions`.`invoice_no`) LIKE %neopept% or ((`contacts`.`name` like %NEOPEPT% or `contacts`.`supplier_business_name` like %NEOPEPT%)) or LOWER(`contacts`.`mobile`) LIKE %neopept% or LOWER(`transactions`.`total_items`) LIKE %neopept% or LOWER(`transactions`.`payment_status`) LIKE %neopept% or LOWER(`transactions`.`final_total`) LIKE %neopept% or LOWER(`transactions`.`shipping_status`) LIKE %neopept% or LOWER(`bl`.`name`) LIKE %neopept% or LOWER(`tos`.`name`) LIKE %neopept% or LOWER(`transactions`.`service_custom_field_1`) LIKE %neopept% or LOWER(`u`.`first_name`) LIKE %neopept% or LOWER(`transactions`.`additional_notes`) LIKE %neopept% or LOWER(`transactions`.`staff_note`) LIKE %neopept% or LOWER(`transactions`.`shipping_details`) LIKE %neopept% or LOWER(`tables`.`name`) LIKE %neopept% or LOWER(`ss`.`first_name`) LIKE %neopept%) group by `transactions`.`id`) count_row_table) at /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Database/Connection.php:664, PDOException(code: 42S22): SQLSTATE[42S22]: Column not found: 1054 Unknown column 'transactions.total_items' in 'where clause' at /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Database/Connection.php:326)
[stacktrace]
#0 /home/wdatzrkn/public_html/tiba/vendor/yajra/laravel-datatables-oracle/src/QueryDataTable.php(106): Yajra\\DataTables\\DataTableAbstract->errorResponse(Object(Illuminate\\Database\\QueryException))
#1 /home/wdatzrkn/public_html/tiba/app/Http/Controllers/SellController.php(578): Yajra\\DataTables\\QueryDataTable->make(true)
#2 [internal function]: App\\Http\\Controllers\\SellController->index()
#3 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Controller.php(54): call_user_func_array(Array, Array)
#4 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/ControllerDispatcher.php(45): Illuminate\\Routing\\Controller->callAction('index', Array)
#5 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Route.php(219): Illuminate\\Routing\\ControllerDispatcher->dispatch(Object(Illuminate\\Routing\\Route), Object(App\\Http\\Controllers\\SellController), 'index')
#6 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Route.php(176): Illuminate\\Routing\\Route->runController()
#7 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(680): Illuminate\\Routing\\Route->run()
#8 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(30): Illuminate\\Routing\\Router->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#9 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/CheckUserLogin.php(22): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#10 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\CheckUserLogin->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#11 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#12 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/AdminSidebarMenu.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#13 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\AdminSidebarMenu->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#14 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#15 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/Timezone.php(30): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#16 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\Timezone->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#17 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#18 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/Language.php(27): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#19 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\Language->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#20 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#21 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/SetSessionData.php(53): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#22 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\SetSessionData->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#23 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#24 /home/wdatzrkn/public_html/tiba/app/Http/Middleware/IsInstalled.php(51): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#25 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): App\\Http\\Middleware\\IsInstalled->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#26 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#27 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Middleware/SubstituteBindings.php(41): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#28 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Routing\\Middleware\\SubstituteBindings->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#29 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#30 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Auth/Middleware/Authenticate.php(43): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#31 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Auth\\Middleware\\Authenticate->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#32 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#33 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/VerifyCsrfToken.php(75): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#34 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\VerifyCsrfToken->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#35 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#36 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/View/Middleware/ShareErrorsFromSession.php(49): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#37 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\View\\Middleware\\ShareErrorsFromSession->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#38 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#39 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Session/Middleware/StartSession.php(56): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#40 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Session\\Middleware\\StartSession->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#41 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#42 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/AddQueuedCookiesToResponse.php(37): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#43 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Cookie\\Middleware\\AddQueuedCookiesToResponse->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#44 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#45 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Cookie/Middleware/EncryptCookies.php(66): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#46 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Cookie\\Middleware\\EncryptCookies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#47 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#48 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(104): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#49 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(682): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#50 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(657): Illuminate\\Routing\\Router->runRouteWithinStack(Object(Illuminate\\Routing\\Route), Object(Illuminate\\Http\\Request))
#51 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(623): Illuminate\\Routing\\Router->runRoute(Object(Illuminate\\Http\\Request), Object(Illuminate\\Routing\\Route))
#52 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Router.php(612): Illuminate\\Routing\\Router->dispatchToRoute(Object(Illuminate\\Http\\Request))
#53 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(176): Illuminate\\Routing\\Router->dispatch(Object(Illuminate\\Http\\Request))
#54 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(30): Illuminate\\Foundation\\Http\\Kernel->Illuminate\\Foundation\\Http\\{closure}(Object(Illuminate\\Http\\Request))
#55 /home/wdatzrkn/public_html/tiba/vendor/barryvdh/laravel-debugbar/src/Middleware/InjectDebugbar.php(58): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#56 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Barryvdh\\Debugbar\\Middleware\\InjectDebugbar->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#57 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#58 /home/wdatzrkn/public_html/tiba/vendor/fideloper/proxy/src/TrustProxies.php(57): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#59 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Fideloper\\Proxy\\TrustProxies->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#60 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#61 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#62 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#63 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#64 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/TransformsRequest.php(21): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#65 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\TransformsRequest->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#66 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#67 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/ValidatePostSize.php(27): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#68 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\ValidatePostSize->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#69 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#70 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Middleware/CheckForMaintenanceMode.php(62): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#71 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(163): Illuminate\\Foundation\\Http\\Middleware\\CheckForMaintenanceMode->handle(Object(Illuminate\\Http\\Request), Object(Closure))
#72 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Routing/Pipeline.php(53): Illuminate\\Pipeline\\Pipeline->Illuminate\\Pipeline\\{closure}(Object(Illuminate\\Http\\Request))
#73 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Pipeline/Pipeline.php(104): Illuminate\\Routing\\Pipeline->Illuminate\\Routing\\{closure}(Object(Illuminate\\Http\\Request))
#74 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(151): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#75 /home/wdatzrkn/public_html/tiba/vendor/laravel/framework/src/Illuminate/Foundation/Http/Kernel.php(116): Illuminate\\Foundation\\Http\\Kernel->sendRequestThroughRouter(Object(Illuminate\\Http\\Request))
#76 /home/wdatzrkn/public_html/tiba/public/index.php(53): Illuminate\\Foundation\\Http\\Kernel->handle(Object(Illuminate\\Http\\Request))
#77 {main}
"} 
